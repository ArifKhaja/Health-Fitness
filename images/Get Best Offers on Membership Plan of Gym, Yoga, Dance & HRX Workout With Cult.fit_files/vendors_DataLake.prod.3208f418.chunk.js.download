/*! For license information please see vendors~DataLake.prod.3208f418.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([["vendors~DataLake"],{"./node_modules/@curefit/datalake/lib/package.json":function(e){e.exports=JSON.parse('{"a":"1.73.3"}')},"./node_modules/@curefit/datalake/node_modules/denque/index.js":function(e,t,n){"use strict";function r(e,t){t=t||{};this._head=0,this._tail=0,this._capacity=t.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(e)&&this._fromArray(e)}r.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var n=this.size();if(!(t>=n||t<-n))return t<0&&(t+=n),this._list[t=this._head+t&this._capacityMask]}},r.prototype.get=function(e){return this.peekAt(e)},r.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},r.prototype.peekFront=function(){return this.peek()},r.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(r.prototype,"length",{get:function(){return this.size()}}),r.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.unshift=function(e){return void 0===e?this.size():(this._head=this._head-1+this._list.length&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail))},r.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},r.prototype.push=function(e){if(void 0===e)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),n}},r.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var n=this.size(),r=this._list.length;if(!(t>=n||t<-n)){t<0&&(t+=n);var i,o=this._list[t=this._head+t&this._capacityMask];if(e<n/2){for(i=e;i>0;i--)this._list[t]=this._list[t=t-1+r&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(i=n-1-e;i>0;i--)this._list[t]=this._list[t=t+1+r&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+r&this._capacityMask}return o}}},r.prototype.remove=function(e,t){var n,r=e,i=t;if(r===(0|r)&&this._head!==this._tail){var o=this.size(),s=this._list.length;if(!(r>=o||r<-o||t<1)){if(r<0&&(r+=o),1===t||!t)return(n=new Array(1))[0]=this.removeOne(r),n;if(0===r&&r+t>=o)return n=this.toArray(),this.clear(),n;var u;for(r+t>o&&(t=o-r),n=new Array(t),u=0;u<t;u++)n[u]=this._list[this._head+r+u&this._capacityMask];if(r=this._head+r&this._capacityMask,e+t===o){for(this._tail=this._tail-t+s&this._capacityMask,u=t;u>0;u--)this._list[r=r+1+s&this._capacityMask]=void 0;return n}if(0===e){for(this._head=this._head+t+s&this._capacityMask,u=t-1;u>0;u--)this._list[r=r+1+s&this._capacityMask]=void 0;return n}if(r<o/2){for(this._head=this._head+e+t+s&this._capacityMask,u=e;u>0;u--)this.unshift(this._list[r=r-1+s&this._capacityMask]);for(r=this._head-1+s&this._capacityMask;i>0;)this._list[r=r-1+s&this._capacityMask]=void 0,i--;e<0&&(this._tail=r)}else{for(this._tail=r,r=r+t+s&this._capacityMask,u=o-(t+e);u>0;u--)this.push(this._list[r++]);for(r=this._tail;i>0;)this._list[r=r+1+s&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=s>>>2&&this._shrinkArray(),n}}},r.prototype.splice=function(e,t){var n=e;if(n===(0|n)){var r=this.size();if(n<0&&(n+=r),!(n>r)){if(arguments.length>2){var i,o,s,u=arguments.length,c=this._list.length,a=2;if(!r||n<r/2){for(o=new Array(n),i=0;i<n;i++)o[i]=this._list[this._head+i&this._capacityMask];for(0===t?(s=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(s=this.remove(n,t),this._head=this._head+n+c&this._capacityMask);u>a;)this.unshift(arguments[--u]);for(i=n;i>0;i--)this.unshift(o[i-1])}else{var d=(o=new Array(r-(n+t))).length;for(i=0;i<d;i++)o[i]=this._list[this._head+n+t+i&this._capacityMask];for(0===t?(s=[],n!=r&&(this._tail=this._head+n+c&this._capacityMask)):(s=this.remove(n,t),this._tail=this._tail-d+c&this._capacityMask);a<u;)this.push(arguments[a++]);for(i=0;i<d;i++)this.push(o[i])}return s}return this.remove(n,t)}}},r.prototype.clear=function(){this._head=0,this._tail=0},r.prototype.isEmpty=function(){return this._head===this._tail},r.prototype.toArray=function(){return this._copyArray(!1)},r.prototype._fromArray=function(e){for(var t=0;t<e.length;t++)this.push(e[t])},r.prototype._copyArray=function(e){var t,n=[],r=this._list,i=r.length;if(e||this._head>this._tail){for(t=this._head;t<i;t++)n.push(r[t]);for(t=0;t<this._tail;t++)n.push(r[t])}else for(t=this._head;t<this._tail;t++)n.push(r[t]);return n},r.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length*=2,this._capacityMask=this._capacityMask<<1|1},r.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},e.exports=r},"./node_modules/@curefit/web-datalake/lib/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"WebDatalake",(function(){return F}));var r=n("./node_modules/pouchdb-collections/lib/index.es.js"),i=n("./node_modules/argsarray/index.js"),o=n.n(i),s=n("./node_modules/pouchdb-merge/lib/index.es.js"),u=n("./node_modules/pouchdb-errors/lib/index.es.js"),c=n("./node_modules/pouchdb-utils/lib/index-browser.es.js"),a=n("./node_modules/inherits/inherits_browser.js"),d=n.n(a),l=n("./node_modules/events/events.js"),f=n.n(l),h=n("./node_modules/pouchdb-fetch/lib/index-browser.es.js"),v=n("./node_modules/pouchdb-selector-core/lib/index.es.js");function p(e,t){if(e.selector&&(e.filter&&"_selector"!==e.filter))return t(new Error('selector invalid for filter "'+("string"==typeof e.filter?e.filter:"function")+'"'));t()}function y(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=Object(c.n)(e.view):e.filter=Object(c.n)(e.filter))}function m(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!Object(c.k)(e.db)}function _(e,t){var n=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var r=Object(u.p)(u.b,"`view` filter parameter not found or invalid.");return n(r)}var i=Object(c.p)(t.view);e.db.get("_design/"+i[0],(function(r,o){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(Object(u.q)(r));var s,a=o&&o.views&&o.views[i[1]]&&o.views[i[1]].map;if(!a)return n(Object(u.p)(u.h,o.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=(s=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+a+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),Object(c.s)(s,{})),e.doChanges(t)}))}else if(t.selector)t.filter=function(e){return Object(v.g)(e,t.selector)},e.doChanges(t);else{var o=Object(c.p)(t.filter);e.db.get("_design/"+o[0],(function(r,i){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(Object(u.q)(r));var s,a=i&&i.filters&&i.filters[o[1]];if(!a)return n(Object(u.p)(u.h,i&&i.filters?"missing json key: "+o[1]:"missing json key: filters"));t.filter=(s=a,Object(c.s)('"use strict";\nreturn '+s+";",{})),e.doChanges(t)}))}}var b=function(e){e._changesFilterPlugin={validate:p,normalize:y,shouldFilter:m,filter:_}};function g(e,t,n){f.a.call(this);var r=this;this.db=e;var i=(t=t?Object(c.e)(t):{}).complete=Object(c.o)((function(t,n){t?Object(c.l)(r,"error")>0&&r.emit("error",t):r.emit("complete",n),r.removeAllListeners(),e.removeListener("destroyed",o)}));function o(){r.cancel()}n&&(r.on("complete",(function(e){n(null,e)})),r.on("error",n)),e.once("destroyed",o),t.onChange=function(e,t,n){r.isCancelled||function(e,t,n,r){try{e.emit("change",t,n,r)}catch(e){Object(c.h)("error",'Error in .on("change", function):',e)}}(r,e,t,n)};var s=new Promise((function(e,n){t.complete=function(t,r){t?n(t):e(r)}}));r.once("cancel",(function(){e.removeListener("destroyed",o),t.complete(null,{status:"cancelled"})})),this.then=s.then.bind(s),this.catch=s.catch.bind(s),this.then((function(e){i(null,e)}),i),e.taskqueue.isReady?r.validateChanges(t):e.taskqueue.addTask((function(e){e?t.complete(e):r.isCancelled?r.emit("cancel"):r.validateChanges(t)}))}function w(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=Object(s.b)(t.rev_tree).map((function(e){return{rev:e.rev}})));var i={id:t.id,changes:r,doc:e};return Object(s.c)(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=Object(s.a)(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function j(e,t){return e<t?-1:e>t?1:0}function k(e,t){return function(n,r){n||r[0]&&r[0].error?((n=n||r[0]).docId=t,e(n)):e(null,r.length?r[0]:r)}}function O(e,t){var n=j(e._id,t._id);return 0!==n?n:j(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function x(){for(var e in f.a.call(this),x.prototype)"function"==typeof this[e]&&(this[e]=this[e].bind(this))}function A(){this.isReady=!1,this.failed=!1,this.queue=[]}function E(e,t){if(!(this instanceof E))return new E(e,t);var n=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),void 0===t.deterministic_revs&&(t.deterministic_revs=!0),this.__opts=t=Object(c.e)(t),n.auto_compaction=t.auto_compaction,n.prefix=E.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var r=function(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=E.adapters,i=E.preferredAdapters,o=E.prefix,s=t.adapter;if(!s)for(var u=0;u<i.length&&("idb"===(s=i[u])&&"websql"in r&&Object(c.i)()&&localStorage["_pouch__websqldb_"+o+e]);++u)Object(c.h)("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var a=r[s];return{name:!a||!("use_prefix"in a)||a.use_prefix?o+e:e,adapter:s}}((t.prefix||"")+e,t);if(t.name=r.name,t.adapter=t.adapter||r.adapter,n.name=e,n._adapter=t.adapter,E.emit("debug",["adapter","Picked adapter: ",t.adapter]),!E.adapters[t.adapter]||!E.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);x.call(n),n.taskqueue=new A,n.adapter=t.adapter,E.adapters[t.adapter].call(n,t,(function(e){if(e)return n.taskqueue.fail(e);!function(e){function t(t){e.removeListener("closed",n),t||e.constructor.emit("destroyed",e.name)}function n(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",n),e.constructor.emit("ref",e)}(n),n.emit("created",n),E.emit("created",n.name),n.taskqueue.ready(n)}))}d()(g,f.a),g.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},g.prototype.validateChanges=function(e){var t=e.complete,n=this;E._changesFilterPlugin?E._changesFilterPlugin.validate(e,(function(r){if(r)return t(r);n.doChanges(e)})):n.doChanges(e)},g.prototype.doChanges=function(e){var t=this,n=e.complete;if("live"in(e=Object(c.e)(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=w,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(E._changesFilterPlugin){if(E._changesFilterPlugin.normalize(e),E._changesFilterPlugin.shouldFilter(this,e))return E._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach((function(t){t in e&&Object(c.h)("warn",'The "'+t+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')}));"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&"function"==typeof r.cancel){var i=t.cancel;t.cancel=o()((function(e){r.cancel(),i.apply(this,e)}))}}else this.db.info().then((function(r){t.isCancelled?n(null,{status:"cancelled"}):(e.since=r.update_seq,t.doChanges(e))}),n)},d()(x,f.a),x.prototype.post=Object(c.a)("post",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(Object(u.p)(u.k));this.bulkDocs({docs:[e]},t,k(n,e._id))})),x.prototype.put=Object(c.a)("put",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(Object(u.p)(u.k));if(Object(c.j)(e._id),Object(s.d)(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var r,i,o,a,d=this;function l(n){"function"==typeof d._put&&!1!==t.new_edits?d._put(e,t,n):d.bulkDocs({docs:[e]},t,k(n,e._id))}t.force&&e._rev?(r=e._rev.split("-"),i=r[1],o=parseInt(r[0],10)+1,a=Object(c.r)(),e._revisions={start:o,ids:[a,i]},e._rev=o+"-"+a,t.new_edits=!1,l((function(t){n(t,t?null:{ok:!0,id:e._id,rev:e._rev})}))):l(n)})),x.prototype.putAttachment=Object(c.a)("putAttachment",(function(e,t,n,r,i){var o=this;function s(e){var n="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:i,data:r,revpos:++n},o.put(e)}return"function"==typeof i&&(i=r,r=n,n=null),void 0===i&&(i=r,r=n,n=null),i||Object(c.h)("warn","Attachment",t,"on document",e,"is missing content_type"),o.get(e).then((function(e){if(e._rev!==n)throw Object(u.p)(u.n);return s(e)}),(function(t){if(t.reason===u.h.message)return s({_id:e});throw t}))})),x.prototype.removeAttachment=Object(c.a)("removeAttachment",(function(e,t,n,r){var i=this;i.get(e,(function(e,o){if(e)r(e);else if(o._rev===n){if(!o._attachments)return r();delete o._attachments[t],0===Object.keys(o._attachments).length&&delete o._attachments,i.put(o,r)}else r(Object(u.p)(u.n))}))})),x.prototype.remove=Object(c.a)("remove",(function(e,t,n,r){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(i=e,"function"==typeof t?(r=t,n={}):(r=n,n=t)),(n=n||{}).was_delete=!0;var o={_id:i._id,_rev:i._rev||n.rev,_deleted:!0};if(Object(s.d)(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[o]},n,k(r,o._id))})),x.prototype.revsDiff=Object(c.a)("revsDiff",(function(e,t,n){"function"==typeof t&&(n=t,t={});var i=Object.keys(e);if(!i.length)return n(null,{});var o=0,u=new r.a;function c(e,t){u.has(e)||u.set(e,{missing:[]}),u.get(e).missing.push(t)}i.map((function(t){this._getRevisionTree(t,(function(r,a){if(r&&404===r.status&&"missing"===r.message)u.set(t,{missing:e[t]});else{if(r)return n(r);!function(t,n){var r=e[t].slice(0);Object(s.i)(n,(function(e,n,i,o,s){var u=n+"-"+i,a=r.indexOf(u);-1!==a&&(r.splice(a,1),"available"!==s.status&&c(t,u))})),r.forEach((function(e){c(t,e)}))}(t,a)}if(++o===i.length){var d={};return u.forEach((function(e,t){d[t]=e})),n(null,d)}}))}),this)})),x.prototype.bulkGet=Object(c.a)("bulkGet",(function(e,t){Object(c.c)(this,e,t)})),x.prototype.compactDocument=Object(c.a)("compactDocument",(function(e,t,n){var r=this;this._getRevisionTree(e,(function(i,o){if(i)return n(i);var u=function(e){var t={},n=[];return Object(s.i)(e,(function(e,r,i,o){var s=r+"-"+i;return e&&(t[s]=0),void 0!==o&&n.push({from:o,to:s}),s})),n.reverse(),n.forEach((function(e){t[e.from]=void 0===t[e.from]?1+t[e.to]:Math.min(t[e.from],1+t[e.to])})),t}(o),c=[],a=[];Object.keys(u).forEach((function(e){u[e]>t&&c.push(e)})),Object(s.i)(o,(function(e,t,n,r,i){var o=t+"-"+n;"available"===i.status&&-1!==c.indexOf(o)&&a.push(o)})),r._doCompaction(e,a,n)}))})),x.prototype.compact=Object(c.a)("compact",(function(e,t){"function"==typeof e&&(t=e,e={});e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:t}),1===this._compactionQueue.length&&function e(t){var n=t._compactionQueue[0],r=n.opts,i=n.callback;t.get("_local/compaction").catch((function(){return!1})).then((function(n){n&&n.last_seq&&(r.last_seq=n.last_seq),t._compact(r,(function(n,r){n?i(n):i(null,r),Object(c.m)((function(){t._compactionQueue.shift(),t._compactionQueue.length&&e(t)}))}))}))}(this)})),x.prototype._compact=function(e,t){var n=this,r=[];n.changes({return_docs:!1,last_seq:e.last_seq||0}).on("change",(function(e){r.push(n.compactDocument(e.id,0))})).on("complete",(function(e){var i=e.last_seq;Promise.all(r).then((function(){return Object(c.u)(n,"_local/compaction",(function(e){return(!e.last_seq||e.last_seq<i)&&(e.last_seq=i,e)}))})).then((function(){t(null,{ok:!0})})).catch(t)})).on("error",t)},x.prototype.get=Object(c.a)("get",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),"string"!=typeof e)return n(Object(u.p)(u.e));if(Object(s.d)(e)&&"function"==typeof this._getLocal)return this._getLocal(e,n);var r=[],i=this;function o(){var o=[],s=r.length;if(!s)return n(null,o);r.forEach((function(r){i.get(e,{rev:r,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},(function(e,t){if(e)o.push({missing:r});else{for(var i,u=0,c=o.length;u<c;u++)if(o[u].ok&&o[u].ok._rev===t._rev){i=!0;break}i||o.push({ok:t})}--s||n(null,o)}))}))}if(!t.open_revs)return this._get(e,t,(function(r,o){if(r)return r.docId=e,n(r);var u=o.doc,c=o.metadata,a=o.ctx;if(t.conflicts){var d=Object(s.a)(c);d.length&&(u._conflicts=d)}if(Object(s.c)(c,u._rev)&&(u._deleted=!0),t.revs||t.revs_info){for(var l=u._rev.split("-"),f=parseInt(l[0],10),h=l[1],v=Object(s.h)(c.rev_tree),p=null,y=0;y<v.length;y++){var m=v[y],_=m.ids.map((function(e){return e.id})).indexOf(h);(_===f-1||!p&&-1!==_)&&(p=m)}if(!p)return(r=new Error("invalid rev tree")).docId=e,n(r);var b=p.ids.map((function(e){return e.id})).indexOf(u._rev.split("-")[1])+1;if(p.ids.splice(b,p.ids.length-b),p.ids.reverse(),t.revs&&(u._revisions={start:p.pos+p.ids.length-1,ids:p.ids.map((function(e){return e.id}))}),t.revs_info){var g=p.pos+p.ids.length;u._revs_info=p.ids.map((function(e){return{rev:--g+"-"+e.id,status:e.opts.status}}))}}if(t.attachments&&u._attachments){var w=u._attachments,j=Object.keys(w).length;if(0===j)return n(null,u);Object.keys(w).forEach((function(e){this._getAttachment(u._id,e,w[e],{rev:u._rev,binary:t.binary,ctx:a},(function(t,r){var i=u._attachments[e];i.data=r,delete i.stub,delete i.length,--j||n(null,u)}))}),i)}else{if(u._attachments)for(var k in u._attachments)u._attachments.hasOwnProperty(k)&&(u._attachments[k].stub=!0);n(null,u)}}));if("all"===t.open_revs)this._getRevisionTree(e,(function(e,t){if(e)return n(e);r=Object(s.b)(t).map((function(e){return e.rev})),o()}));else{if(!Array.isArray(t.open_revs))return n(Object(u.p)(u.o,"function_clause"));r=t.open_revs;for(var c=0;c<r.length;c++){var a=r[c];if("string"!=typeof a||!/^\d+-/.test(a))return n(Object(u.p)(u.f))}o()}})),x.prototype.getAttachment=Object(c.a)("getAttachment",(function(e,t,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(e,n,(function(o,s){return o?r(o):s.doc._attachments&&s.doc._attachments[t]?(n.ctx=s.ctx,n.binary=!0,void i._getAttachment(e,t,s.doc._attachments[t],n,r)):r(Object(u.p)(u.h))}))})),x.prototype.allDocs=Object(c.a)("allDocs",(function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter((function(t){return t in e}))[0];if(n)return void t(Object(u.p)(u.l,"Query parameter `"+n+"` is not compatible with multi-get"));if(!Object(c.k)(this)&&(function(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}(e),0===e.keys.length))return this._allDocs({limit:0},t)}return this._allDocs(e,t)})),x.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new g(this,e,t)},x.prototype.close=Object(c.a)("close",(function(e){return this._closed=!0,this.emit("closed"),this._close(e)})),x.prototype.info=Object(c.a)("info",(function(e){var t=this;this._info((function(n,r){if(n)return e(n);r.db_name=r.db_name||t.name,r.auto_compaction=!(!t.auto_compaction||Object(c.k)(t)),r.adapter=t.adapter,e(null,r)}))})),x.prototype.id=Object(c.a)("id",(function(e){return this._id(e)})),x.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},x.prototype.bulkDocs=Object(c.a)("bulkDocs",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(Object(u.p)(u.g));for(var r=0;r<e.docs.length;++r)if("object"!=typeof e.docs[r]||Array.isArray(e.docs[r]))return n(Object(u.p)(u.k));var i;if(e.docs.forEach((function(e){e._attachments&&Object.keys(e._attachments).forEach((function(t){i=i||function(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}(t),e._attachments[t].content_type||Object(c.h)("warn","Attachment",t,"on document",e._id,"is missing content_type")}))})),i)return n(Object(u.p)(u.b,i));"new_edits"in t||(t.new_edits=!("new_edits"in e)||e.new_edits);var o=this;t.new_edits||Object(c.k)(o)||e.docs.sort(O),function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var o=r[i];n._attachments[o]=Object(c.q)(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var s=e.docs.map((function(e){return e._id}));return this._bulkDocs(e,t,(function(e,r){if(e)return n(e);if(t.new_edits||(r=r.filter((function(e){return e.error}))),!Object(c.k)(o))for(var i=0,u=r.length;i<u;i++)r[i].id=r[i].id||s[i];n(null,r)}))})),x.prototype.registerDependentDatabase=Object(c.a)("registerDependentDatabase",(function(e,t){var n=new this.constructor(e,this.__opts);Object(c.u)(this,"_local/_pouch_dependentDbs",(function(t){return t.dependentDbs=t.dependentDbs||{},!t.dependentDbs[e]&&(t.dependentDbs[e]=!0,t)})).then((function(){t(null,{db:n})})).catch(t)})),x.prototype.destroy=Object(c.a)("destroy",(function(e,t){"function"==typeof e&&(t=e,e={});var n=this,r=!("use_prefix"in n)||n.use_prefix;function i(){n._destroy(e,(function(e,r){if(e)return t(e);n._destroyed=!0,n.emit("destroyed"),t(null,r||{ok:!0})}))}if(Object(c.k)(n))return i();n.get("_local/_pouch_dependentDbs",(function(e,o){if(e)return 404!==e.status?t(e):i();var s=n.constructor,u=Object.keys(o.dependentDbs).map((function(e){var t=r?e.replace(new RegExp("^"+s.prefix),""):e;return new s(t,n.__opts).destroy()}));Promise.all(u).then(i,t)}))})),A.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},A.prototype.fail=function(e){this.failed=e,this.execute()},A.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},A.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},d()(E,x),E.adapters={},E.preferredAdapters=[],E.prefix="_pouch_";var S=new f.a;!function(e){Object.keys(f.a.prototype).forEach((function(t){"function"==typeof f.a.prototype[t]&&(e[t]=S[t].bind(S))}));var t=e._destructionListeners=new r.a;e.on("ref",(function(e){t.has(e.name)||t.set(e.name,[]),t.get(e.name).push(e)})),e.on("unref",(function(e){if(t.has(e.name)){var n=t.get(e.name),r=n.indexOf(e);r<0||(n.splice(r,1),n.length>1?t.set(e.name,n):t.delete(e.name))}})),e.on("destroyed",(function(e){if(t.has(e)){var n=t.get(e);t.delete(e),n.forEach((function(e){e.emit("destroyed",!0)}))}}))}(E),E.adapter=function(e,t,n){t.valid()&&(E.adapters[e]=t,n&&E.preferredAdapters.push(e))},E.plugin=function(e){if("function"==typeof e)e(E);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach((function(t){E.prototype[t]=e[t]}))}return this.__defaults&&(E.__defaults=Object(c.b)({},this.__defaults)),E},E.defaults=function(e){function t(e,n){if(!(this instanceof t))return new t(e,n);n=n||{},e&&"object"==typeof e&&(e=(n=e).name,delete n.name),n=Object(c.b)({},t.__defaults,n),E.call(this,e,n)}return d()(t,E),t.preferredAdapters=E.preferredAdapters.slice(),Object.keys(E).forEach((function(e){e in t||(t[e]=E[e])})),t.__defaults=Object(c.b)({},this.__defaults,e),t},E.fetch=function(e,t){return Object(h.b)(e,t)};E.plugin(b),E.version="7.2.2";var I=E,D=n("./node_modules/@curefit/datalake/node_modules/denque/index.js"),P=n.n(D),M=n("./node_modules/react-native-uuid/uuid.js"),C=n.n(M),q=n("./node_modules/@curefit/datalake/lib/package.json"),$=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function u(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}c((r=r.apply(e,t||[])).next())}))};class T{static logEvent(e){var t,n;return $(this,void 0,void 0,(function*(){const r=(new Date).getTime(),i={_id:B(),eventName:null!==(t=e.eventName)&&void 0!==t?t:"none",eventParams:null!==(n=e.eventParams)&&void 0!==n?n:{none:"none"},syncPriority:e.syncPriority,createdAt:r,updatedAt:r};"session_started"===e.eventName&&T.logToCloud({level:"debug",body:"session_started logged",eventId:i._id});try{return yield T.upsertEvent(i),!0}catch(e){return T.logToCloud({level:"error",body:"error in upsertEvent",error:e}),!1}}))}static breakSessionIfTimedOut({openEvent:e,closeEvent:t}){return $(this,void 0,void 0,(function*(){return t&&e&&e.createdAt-t.createdAt>T.config.sessionTimeoutMillis&&T.latestMemorySession&&e.createdAt-T.latestMemorySession.createdAt>T.config.sessionTimeoutMillis&&(yield T.breakSession({closeEvent:t,openEvent:T.memoryEventsDenque.peekFront()})),!0}))}static breakSession({openEvent:e,closeEvent:t}){var n,r,i,o,s;return $(this,void 0,void 0,(function*(){const u=(new Date).getTime();yield T.setupAndValidateSessionsCollection(),T.logToCloud({level:"debug",body:"session break"}),yield T.upsertEvent({eventName:"pouchdb_session_lifecycle",eventParams:{type:"session_break",sessionId:null===(n=T.latestMemorySession)||void 0===n?void 0:n.sessionId,sessionStartedAt:null===(r=T.latestMemorySession)||void 0===r?void 0:r.createdAt,sessionEndedAt:null==t?void 0:t.createdAt}});const c={createdAt:null!==(i=null==e?void 0:e.createdAt)&&void 0!==i?i:u,sessionId:B(),sessionParams:Object.assign({},null!==(s=null===(o=T.latestMemorySession)||void 0===o?void 0:o.sessionParams)&&void 0!==s?s:{})};return yield T.upsertSession(c),!0}))}static setUser(e){var t,n,r;return $(this,void 0,void 0,(function*(){const i=(new Date).getTime();if((null===(t=T.latestMemoryUser)||void 0===t?void 0:t.userId)===e.userId)return yield T.setUserParams(e.userParams),!0;T.latestMemoryUser={userId:e.userId,userParams:e.userParams,createdAt:i,updatedAt:i};const o=yield T.upsertEvent({createdAt:i,eventName:"pouchdb_lifecycle",eventParams:{type:"user_changed"},syncPriority:"low"});if(!T.isInitialized)return!0;yield T.breakSession({closeEvent:o,openEvent:o});const s={createdAt:i,userId:null!==(n=e.userId)&&void 0!==n?n:"none",userParams:null!==(r=e.userParams)&&void 0!==r?r:{}};return yield T.upsertUser(s),!0}))}static setSessionParams(e){var t,n,r;return $(this,void 0,void 0,(function*(){const i=(new Date).getTime();if(null!==(t=T.latestMemorySession)&&void 0!==t||(T.latestMemorySession={sessionId:B(),createdAt:i,updatedAt:i}),T.latestMemorySession.sessionParams=Object.assign({},null!==(n=T.latestMemorySession.sessionParams)&&void 0!==n?n:{},e),!T.isInitialized)return!0;const o=yield T.getSessionBySessionId(T.latestDbSession.sessionId);return o&&(o.sessionParams=Object.assign({},null!==(r=o.sessionParams)&&void 0!==r?r:{},T.latestMemorySession.sessionParams),yield T.upsertSession(o)),!0}))}static setDeviceParams(e){var t,n,r,i;return $(this,void 0,void 0,(function*(){yield T.setSessionParams(e);const o=(new Date).getTime();if(null!==(t=T.latestMemoryDevice)&&void 0!==t||(T.latestMemoryDevice={deviceId:null!==(n=null==e?void 0:e.deviceId)&&void 0!==n?n:B(),createdAt:o,updatedAt:o}),T.latestMemoryDevice.deviceParams=Object.assign({},null!==(r=T.latestMemoryDevice.deviceParams)&&void 0!==r?r:{},e),!T.isInitialized)return!0;const s=yield T.getDeviceByDeviceId(T.latestDbDevice.deviceId);return s&&(s.deviceParams=Object.assign({},null!==(i=s.deviceParams)&&void 0!==i?i:{},T.latestMemoryDevice.deviceParams),yield T.upsertDevice(s)),!0}))}static setAppParams(e){return $(this,void 0,void 0,(function*(){return T.setSessionParams(e)}))}static setUserParams(e){var t,n,r,i,o;return $(this,void 0,void 0,(function*(){const s=(new Date).getTime();if(null!==(t=T.latestMemoryUser)&&void 0!==t||(T.latestMemoryUser={createdAt:s,updatedAt:s}),null!==(n=(o=T.latestMemoryUser).userId)&&void 0!==n||(o.userId=null==e?void 0:e.userId),T.latestMemoryUser.userParams=Object.assign({},null!==(r=T.latestMemoryUser.userParams)&&void 0!==r?r:{},e),!T.isInitialized)return!0;const u=yield T.getUserByUserId(T.latestDbUser.userId);return u&&(u.userParams=Object.assign({},null!==(i=u.userParams)&&void 0!==i?i:{},T.latestMemoryUser.userParams),yield T.upsertUser(u)),!0}))}static forceSync(){var e,t,n;return $(this,void 0,void 0,(function*(){if(!1===T.config.syncEnabled)return!1;if(!T.isConfigured)return!1;if(!T.isInitialized)return yield T.syncMemoryEvents(),!0;const r=(new Date).getTime(),i=T.latestMemoryDevice;try{const o=null!==(t=null===(e=null==i?void 0:i.deviceParams)||void 0===e?void 0:e.syncLock)&&void 0!==t&&t,s=null===(n=null==i?void 0:i.deviceParams)||void 0===n?void 0:n.syncLockTs;if(!0===o&&s&&r-s<5e3)return!1;i.deviceParams=Object.assign({},i.deviceParams,{syncLock:!0,syncLockTs:r});let u=yield T.syncDbEvents(),c=5;for(;u>50&&c>0;)u=yield T.syncDbEvents(),c--;i.deviceParams=Object.assign({},i.deviceParams,{syncLock:!1})}catch(e){i.deviceParams=Object.assign({},i.deviceParams,{syncLock:!1}),T.logToCloud({level:"error",body:"Datalake.forceSync failed",error:e})}return!0}))}static init(e,t){var n;return $(this,void 0,void 0,(function*(){T.logToCloud({level:"debug",body:"init"}),T.config=Object.assign({},T.config,e),null!==(n=T.memoryEventsDenque)&&void 0!==n||(T.memoryEventsDenque=new P.a);try{return yield T.setupCollections(),yield T.forceSync(),T.isInitialized=!0,!0===(null==t?void 0:t.setupPeriodicSync)?yield T.setupSync():(yield T.flushMemoryEvents(),yield T.forceSync()),yield T.upsertEvent({eventName:"pouchdb_lifecycle",eventParams:{type:"pouchdb_init"},syncPriority:"low"}),!0}catch(e){return T.logToCloud({level:"error",body:"error while initializing Datalake",error:e}),!1}}))}static configure(e){return $(this,void 0,void 0,(function*(){return T.logToCloud({level:"debug",body:"configure"}),T.config=Object.assign({},T.config,e),yield T.setUserParams(T.config.userInfo),yield T.setUserParams(T.config.serverUserInfo),yield T.setSessionParams(T.config.sessionInfo),yield T.setSessionParams(T.config.serverSessionInfo),yield T.setSessionParams(T.config.appInfo),yield T.setSessionParams(T.config.serverAppInfo),yield T.setSessionParams(T.config.deviceInfo),yield T.setSessionParams(T.config.serverDeviceInfo),yield T.setDeviceParams(T.config.deviceInfo),yield T.setDeviceParams(T.config.serverDeviceInfo),T.isConfigured=!0,yield T.forceSync(),yield T.upsertEvent({eventName:"pouchdb_lifecycle",eventParams:{type:"pouchdb_configure"},syncPriority:"low"}),!0}))}static configureCloudLogging(e){return $(this,void 0,void 0,(function*(){return e.logToCloud&&(T.config.logToCloud=e.logToCloud),!0}))}static configureClockSkew(e){return $(this,void 0,void 0,(function*(){return e.clockSkewMillis&&(T.config.clockSkewMillis=e.clockSkewMillis),!0}))}static setupCollections(){return $(this,void 0,void 0,(function*(){return yield T.setupAndValidateDevicesCollection(),yield T.setupAndValidateUsersCollection(),yield T.setupAndValidateSessionsCollection(),yield T.setupAndValidateEventsCollection(),yield T.upsertEvent({eventName:"pouchdb_lifecycle",eventParams:{type:"collections_setup"},syncPriority:"low"}),!0}))}static resetCollections(){return $(this,void 0,void 0,(function*(){const e=new T.config.PouchDb("devices",{adapter:T.config.adapter,auto_compaction:!0,revs_limit:1});yield e.destroy();const t=new T.config.PouchDb("users",{adapter:T.config.adapter,auto_compaction:!0,revs_limit:1});yield t.destroy();const n=new T.config.PouchDb("sessions",{adapter:T.config.adapter,auto_compaction:!0,revs_limit:1});yield n.destroy();const r=new T.config.PouchDb("events",{adapter:T.config.adapter,auto_compaction:!0,revs_limit:1});return yield r.destroy(),yield T.upsertEvent({eventName:"pouchdb_lifecycle",eventParams:{type:"collections_reset"},syncPriority:"low"}),T.logToCloud({level:"warn",body:"pouchdb_cols_reset"}),!0}))}static setupAndValidateSessionsCollection(){return $(this,void 0,void 0,(function*(){let e=yield T.createSessionsCollection();const t=yield e.info();return yield T.upsertEvent({syncPriority:"low",eventName:"pouchdb_sessions_info",eventParams:{doc_count:t.doc_count,update_seq:t.update_seq}}),T.logToCloud({level:"debug",body:"pouchdb_sessions_info",dbInfo:t}),(t.doc_count>T.config.maxSessionsStored||t.update_seq>100*T.config.maxSessionsStored)&&(T.logToCloud({level:"debug",body:"pouchdb_sessions_destroyed",dbInfo:t}),yield T.upsertEvent({eventName:"pouchdb_sessions_destroyed"}),yield e.destroy(),e=yield T.createSessionsCollection()),T.sessionsCollection=e,yield N(U(50,100)),yield T.initSessionsCollection(),e}))}static createSessionsCollection(){return $(this,void 0,void 0,(function*(){const e=new T.config.PouchDb("sessions",{adapter:T.config.adapter,auto_compaction:!0,revs_limit:1});return(yield e.info()).doc_count>2||(yield N(U(50,100)),yield e.createIndex({index:{fields:["createdAt"]}}),yield N(U(50,100)),yield e.createIndex({index:{fields:["sessionId"]}})),e}))}static setupAndValidateUsersCollection(){return $(this,void 0,void 0,(function*(){let e=yield T.createUsersCollection();const t=yield e.info();return yield T.upsertEvent({syncPriority:"low",eventName:"pouchdb_users_info",eventParams:{doc_count:t.doc_count,update_seq:t.update_seq}}),T.logToCloud({level:"debug",body:"pouchdb_users_info",dbInfo:t}),(t.doc_count>T.config.maxUsersStored||t.update_seq>100*T.config.maxUsersStored)&&(T.logToCloud({level:"debug",body:"pouchdb_users_destroyed",dbInfo:t}),yield T.upsertEvent({eventName:"pouchdb_users_destroyed"}),yield e.destroy(),e=yield T.createUsersCollection()),T.usersCollection=e,yield N(U(50,100)),yield T.initUsersCollection(),e}))}static createUsersCollection(){return $(this,void 0,void 0,(function*(){const e=new T.config.PouchDb("users",{adapter:T.config.adapter,auto_compaction:!0,revs_limit:1});return(yield e.info()).doc_count>2||(yield N(U(50,100)),yield e.createIndex({index:{fields:["createdAt"]}}),yield N(U(50,100)),yield e.createIndex({index:{fields:["userId"]}})),e}))}static setupAndValidateDevicesCollection(){return $(this,void 0,void 0,(function*(){let e=yield T.createDevicesCollection();const t=yield e.info();return yield T.upsertEvent({syncPriority:"low",eventName:"pouchdb_devices_info",eventParams:{doc_count:t.doc_count,update_seq:t.update_seq}}),T.logToCloud({level:"debug",body:"pouchdb_devices_info",dbInfo:t}),(t.doc_count>T.config.maxDevicesStored||t.update_seq>5e3*T.config.maxDevicesStored)&&(T.logToCloud({level:"debug",body:"pouchdb_devices_destroyed",dbInfo:t}),yield T.upsertEvent({eventName:"pouchdb_devices_destroyed"}),yield e.destroy(),e=yield T.createDevicesCollection()),T.devicesCollection=e,yield N(U(50,100)),yield T.initDevicesCollection(),e}))}static createDevicesCollection(){return $(this,void 0,void 0,(function*(){const e=new T.config.PouchDb("devices",{adapter:T.config.adapter,auto_compaction:!0,revs_limit:1});return(yield e.info()).doc_count>2||(yield N(U(50,100)),yield e.createIndex({index:{fields:["createdAt"]}}),yield N(U(50,100)),yield e.createIndex({index:{fields:["deviceId"]}})),e}))}static setupAndValidateEventsCollection(){var e,t;return $(this,void 0,void 0,(function*(){let n=yield T.createEventsCollection();const r=yield n.info();if(yield T.upsertEvent({syncPriority:"low",eventName:"pouchdb_events_info",eventParams:{doc_count:r.doc_count,update_seq:r.update_seq}}),T.logToCloud({level:"debug",body:"pouchdb_events_info",dbInfo:r}),r.doc_count>T.config.maxEventsStored||r.update_seq>100*T.config.maxEventsStored){T.logToCloud({level:"debug",body:"pouchdb_events_destroyed",dbInfo:r}),yield T.upsertEvent({eventName:"pouchdb_events_destroyed"});const i=(yield n.find({selector:{createdAt:{$gt:null!==(t=null===(e=T.latestMemoryDevice)||void 0===e?void 0:e.lastSyncedEpochMillis)&&void 0!==t?t:0}},limit:2*T.config.syncBatchSize,sort:[{createdAt:"desc"}]})).docs.filter(e=>!!e.eventName);for(const e of i)yield T.upsertEvent(e);yield n.destroy(),n=yield T.createEventsCollection()}return T.eventsCollection=n,yield N(U(50,100)),yield T.initEventsCollection(),n}))}static createEventsCollection(){return $(this,void 0,void 0,(function*(){const e=new T.config.PouchDb("events",{adapter:T.config.adapter,auto_compaction:!0,revs_limit:1});return(yield e.info()).doc_count>1||(yield N(U(50,100)),yield e.createIndex({index:{fields:["createdAt"]}})),e}))}static upsertEvent(e){var t,n,r,i,o,s,u,c,a,d;return $(this,void 0,void 0,(function*(){"session_started"===e.eventName&&T.logToCloud({level:"debug",body:"session_started incoming",eventId:e._id});const l=(new Date).getTime();return null!==(t=e.createdAt)&&void 0!==t||(e.createdAt=l+T.config.clockSkewMillis),e.updatedAt=l+T.config.clockSkewMillis,null!==(n=e._id)&&void 0!==n||(e._id=B()),null!==(r=e.eventId)&&void 0!==r||(e.eventId=e._id),null!==(i=e.userId)&&void 0!==i||(e.userId=null!==(s=null===(o=T.latestMemoryUser)||void 0===o?void 0:o.userId)&&void 0!==s?s:null===(u=T.latestMemoryDevice)||void 0===u?void 0:u.deviceId),null!==(c=e.sessionId)&&void 0!==c||(e.sessionId=null===(a=T.latestMemorySession)||void 0===a?void 0:a.sessionId),T.latestMemoryEvent=e,null!==(d=T.memoryEventsDenque)&&void 0!==d||(T.memoryEventsDenque=new P.a),T.memoryEventsDenque.push(e),e}))}static upsertUser(e){var t,n,r;return $(this,void 0,void 0,(function*(){const i=(new Date).getTime();if(null!==(t=e.createdAt)&&void 0!==t||(e.createdAt=i+T.config.clockSkewMillis),e.updatedAt=i+T.config.clockSkewMillis,T.latestMemoryUser=e,!T.usersCollection)return e;const o=yield T.usersCollection.bulkDocs([e]);return e._id=null===(n=o[0])||void 0===n?void 0:n.id,e._rev=null===(r=o[0])||void 0===r?void 0:r.rev,T.latestDbUser=e,yield T.upsertEvent({eventName:"pouchdb_lifecycle",eventParams:{type:"upsert_user",userId:e.userId},syncPriority:"low"}),e}))}static upsertSession(e){var t,n,r,i,o,s;return $(this,void 0,void 0,(function*(){const u=(new Date).getTime();if(null!==(t=e.createdAt)&&void 0!==t||(e.createdAt=u+T.config.clockSkewMillis),e.updatedAt=u+T.config.clockSkewMillis,null!==(n=e.sessionId)&&void 0!==n||(e.sessionId=null!==(i=null===(r=T.latestMemorySession)||void 0===r?void 0:r.sessionId)&&void 0!==i?i:B()),T.latestMemorySession=e,!T.sessionsCollection)return e;const c=yield T.sessionsCollection.bulkDocs([e]);return e._id=null===(o=c[0])||void 0===o?void 0:o.id,e._rev=null===(s=c[0])||void 0===s?void 0:s.rev,T.latestDbSession=e,yield T.upsertEvent({eventName:"pouchdb_lifecycle",eventParams:{type:"upsert_session",sessionId:e.sessionId},syncPriority:"low"}),e}))}static upsertDevice(e){var t,n,r;return $(this,void 0,void 0,(function*(){const i=(new Date).getTime();if(null!==(t=e.createdAt)&&void 0!==t||(e.createdAt=i+T.config.clockSkewMillis),e.updatedAt=i+T.config.clockSkewMillis,T.latestMemoryDevice=e,!T.devicesCollection)return e;const o=yield T.devicesCollection.bulkDocs([e]);return e._id=null===(n=o[0])||void 0===n?void 0:n.id,e._rev=null===(r=o[0])||void 0===r?void 0:r.rev,T.latestDbDevice=e,yield T.upsertEvent({eventName:"pouchdb_lifecycle",eventParams:{type:"upsert_device",deviceId:e.deviceId},syncPriority:"low"}),e}))}static getUserByUserId(e){var t;return $(this,void 0,void 0,(function*(){const n=yield T.usersCollection.find({selector:{userId:e,createdAt:{$gt:0}},limit:1});return null===(t=n.docs)||void 0===t?void 0:t[0]}))}static getSessionBySessionId(e){var t;return $(this,void 0,void 0,(function*(){const n=yield T.sessionsCollection.find({selector:{sessionId:e,createdAt:{$gt:0}},limit:1});return null===(t=n.docs)||void 0===t?void 0:t[0]}))}static getDeviceByDeviceId(e){var t;return $(this,void 0,void 0,(function*(){const n=yield T.devicesCollection.find({selector:{deviceId:e,createdAt:{$gt:0}},limit:1});return null===(t=n.docs)||void 0===t?void 0:t[0]}))}static initDevicesCollection(){var e,t,n,r,i,o;return $(this,void 0,void 0,(function*(){const s=(new Date).getTime(),u=yield T.devicesCollection.find({sort:[{createdAt:"desc"}],selector:{createdAt:{$gt:0}},limit:1}),c=null===(e=u.docs)||void 0===e?void 0:e[0];if(c&&c.deviceId)null!==(t=T.latestMemoryDevice)&&void 0!==t||(T.latestMemoryDevice=c),T.latestDbDevice=c;else{const e={createdAt:s,deviceId:null!==(r=null===(n=T.config.deviceInfo)||void 0===n?void 0:n.deviceId)&&void 0!==r?r:B(),deviceParams:Object.assign({},null!==(o=null===(i=T.latestMemoryDevice)||void 0===i?void 0:i.deviceParams)&&void 0!==o?o:{})};yield T.upsertDevice(e)}return!0}))}static initUsersCollection(){var e,t,n,r,i,o,s,u;return $(this,void 0,void 0,(function*(){const c=(new Date).getTime(),a=yield T.usersCollection.find({sort:[{createdAt:"desc"}],selector:{createdAt:{$gt:0}},limit:1}),d=null===(e=a.docs)||void 0===e?void 0:e[0];if(d&&d.userId)null!==(t=T.latestMemoryUser)&&void 0!==t||(T.latestMemoryUser=d),T.latestDbUser=d;else{const e={createdAt:c,userId:null!==(o=null!==(r=null===(n=T.latestMemoryUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:null===(i=T.latestMemoryDevice)||void 0===i?void 0:i.deviceId)&&void 0!==o?o:B(),userParams:Object.assign({},null!==(u=null===(s=T.latestMemoryUser)||void 0===s?void 0:s.userParams)&&void 0!==u?u:{})};yield T.upsertUser(e)}return!0}))}static initSessionsCollection(){var e,t,n,r;return $(this,void 0,void 0,(function*(){const i=(new Date).getTime(),o=yield T.sessionsCollection.find({sort:[{createdAt:"desc"}],selector:{createdAt:{$gt:0}},limit:1}),s=null===(e=o.docs)||void 0===e?void 0:e[0];if(s&&s.sessionId)null!==(t=T.latestMemorySession)&&void 0!==t||(T.latestMemorySession=s),T.latestDbSession=s;else{const e={createdAt:i,sessionParams:Object.assign({},null!==(r=null===(n=T.latestMemorySession)||void 0===n?void 0:n.sessionParams)&&void 0!==r?r:{})};yield T.upsertSession(e)}return!0}))}static initEventsCollection(){var e,t;return $(this,void 0,void 0,(function*(){const n=(new Date).getTime(),r=yield T.eventsCollection.find({sort:[{createdAt:"desc"}],selector:{createdAt:{$gt:0}},limit:1}),i=null===(e=r.docs)||void 0===e?void 0:e[0];if(i&&i.eventId)T.latestDbEvent=i,null!==(t=T.latestMemoryEvent)&&void 0!==t||(T.latestMemoryEvent=i);else{const e={createdAt:n,eventName:"pouchdb_session_init"};yield T.upsertEvent(e)}return yield T.upsertEvent({eventName:"pouchdb_lifecycle",eventParams:{type:"collections_init"},syncPriority:"low"}),!0}))}static flushMemoryEvents(){return $(this,void 0,void 0,(function*(){if(!T.isInitialized)return!1;if(T.memoryEventsDenque.isEmpty())return!0;try{yield T.breakSessionIfTimedOut({closeEvent:T.latestDbEvent,openEvent:T.memoryEventsDenque.peekFront()})}catch(e){T.logToCloud({level:"error",body:"error in Datalake.flushMemoryEvents.breakSessionIfTimedOut",error:e})}try{T.latestMemoryUser&&T.latestDbUser.userId!==T.latestMemoryUser.userId&&(yield T.setUser(T.latestMemoryUser))}catch(e){T.logToCloud({level:"error",body:"error in Datalake.flushMemoryEvents.setUser",error:e})}for(;!T.memoryEventsDenque.isEmpty();){const e=T.memoryEventsDenque.shift();try{yield T.eventsCollection.bulkDocs([e]),T.latestDbEvent=e}catch(t){T.memoryEventsDenque.push(e),T.logToCloud({level:"error",body:"error in flushMemoryEvents.bulkDocs",error:t})}}return!0}))}static setupSync(){return $(this,void 0,void 0,(function*(){return setInterval(e=>$(this,void 0,void 0,(function*(){try{yield T.flushMemoryEvents()}catch(e){T.logToCloud({level:"error",body:"error in Datalake.flushMemoryEvents",error:e})}})),500),setInterval(e=>$(this,void 0,void 0,(function*(){try{yield T.forceSync()}catch(e){T.logToCloud({level:"error",body:"error in Datalake.forceSync",error:e})}})),T.config.syncIntervalMillis),!0}))}static logToCloud(e){var t,n,r,i,o;return $(this,void 0,void 0,(function*(){return null!==(t=e.userId)&&void 0!==t||(e.userId=null===(n=T.latestMemoryUser)||void 0===n?void 0:n.userId),null!==(r=e.deviceId)&&void 0!==r||(e.deviceId=null===(i=T.latestMemoryDevice)||void 0===i?void 0:i.deviceId),null!==(o=e.datalakeSdkVersion)&&void 0!==o||(e.datalakeSdkVersion=q.a),yield T.config.logToCloud(e),!0}))}static syncDbEvents(){var e,t,n;return $(this,void 0,void 0,(function*(){const r=yield T.getDeviceByDeviceId(T.latestDbDevice.deviceId),i=(new Date).getTime(),o=Math.max(null!==(e=null==r?void 0:r.lastSyncedEpochMillis)&&void 0!==e?e:0,i+T.config.clockSkewMillis-T.config.eventStaleMillis),s=(yield T.eventsCollection.find({selector:{createdAt:{$gt:o}},limit:T.config.syncBatchSize,sort:[{createdAt:"asc"}]})).docs.filter(e=>!!e.eventName);if(s.length<20&&s.every(e=>"low"===e.syncPriority))return 0;for(const e of s)"session_started"===e.eventName&&T.logToCloud({level:"debug",body:"session_started outgoing",eventId:e._id});const u=(yield T.sessionsCollection.allDocs({include_docs:!0,update_seq:!1})).rows.map(e=>e.doc),c=(yield T.usersCollection.allDocs({include_docs:!0,update_seq:!1})).rows.map(e=>e.doc);try{const e=yield T.uploadEvents({events:s,sessions:u,users:c}),r=null===(t=s.sort((e,t)=>t.createdAt-e.createdAt))||void 0===t?void 0:t[0],i=yield T.getDeviceByDeviceId(T.latestDbDevice.deviceId);return i&&(i.lastSyncedEpochMillis=Math.max(null!==(n=i.lastSyncedEpochMillis)&&void 0!==n?n:0,r.createdAt),yield T.upsertDevice(i)),e}catch(e){return T.logToCloud({level:"error",body:"error in syncDbEvents.uploadEvents",error:e}),0}}))}static syncMemoryEvents(){return $(this,void 0,void 0,(function*(){const e=[];if(T.memoryEventsDenque.length<20){if(T.memoryEventsDenque.toArray().every(e=>"low"===e.syncPriority))return 0}for(;!T.memoryEventsDenque.isEmpty();){const t=T.memoryEventsDenque.shift();e.push(t)}try{yield T.uploadEvents({events:e,sessions:[T.latestMemorySession],users:[T.latestMemoryUser]})}catch(t){for(const t of e)T.memoryEventsDenque.push(t);return T.logToCloud({level:"error",body:"error in syncMemoryEvents.uploadEvents",error:t}),0}return e.length}))}static uploadEvents({events:e,sessions:t,users:n}){var r,i;return $(this,void 0,void 0,(function*(){const o=new Set,s=new Set;e.forEach(e=>{var t,n,r,i,u,c,a,d,l,f;null!==(t=e.userId)&&void 0!==t||(e.userId=null!==(r=null===(n=T.latestMemoryUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:"none"),e.userId.length>10&&(e.userId=null!==(a=null!==(u=null===(i=T.latestMemoryUser)||void 0===i?void 0:i.userId)&&void 0!==u?u:null===(c=T.latestMemoryDevice)||void 0===c?void 0:c.deviceId)&&void 0!==a?a:"none"),null!==(d=e.sessionId)&&void 0!==d||(e.sessionId=null!==(f=null===(l=T.latestMemorySession)||void 0===l?void 0:l.sessionId)&&void 0!==f?f:"none"),o.add(e.userId),s.add(e.sessionId)});try{for(const u of o)for(const o of s){const s=e.filter(e=>e.userId===u).filter(e=>e.sessionId===o),c=yield T.config.syncCallback({events:s,user:null!==(r=n.find(e=>e.userId===u))&&void 0!==r?r:T.latestMemoryUser,session:null!==(i=t.find(e=>e.sessionId===o))&&void 0!==i?i:T.latestMemorySession,device:T.latestMemoryDevice});if(!0!==c)return Promise.reject({syncStatus:c});for(const e of s)"session_started"===e.eventName&&T.logToCloud({level:"debug",body:"session_started synced",eventId:e._id});yield T.upsertEvent({eventName:"pouchdb_lifecycle",eventParams:{type:"events_synced",batch_size:s.length,batch_userId:u,batch_sessionId:o},syncPriority:"low"})}}catch(e){return T.logToCloud({level:"error",body:"error in uploadEvents.syncCallback",error:e}),Promise.reject({error:e})}return e.length}))}}T.isInitialized=!1,T.isConfigured=!1,T.memoryEventsDenque=new P.a,T.config={isProduction:!1,syncCallback:()=>{},logToCloud:()=>{},adapter:"react-native-sqlite",sessionTimeoutMillis:72e5,syncIntervalMillis:5e3,syncBatchSize:50,maxEventsStored:5e3,maxSessionsStored:200,maxDevicesStored:10,maxUsersStored:50,eventStaleMillis:2592e5,sessionStaleMillis:1728e5,clockSkewMillis:0};const B=()=>C.a.v4()+"-"+C.a.v4(),N=e=>new Promise(t=>setTimeout(t,e)),U=(e,t)=>(Math.random()*(t-e+1)|0)+e;var R=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function u(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}c((r=r.apply(e,t||[])).next())}))};I.plugin(n("./node_modules/pouchdb-adapter-indexeddb/lib/index.es.js").default).plugin(n("./node_modules/pouchdb-find/lib/index-browser.es.js").default).plugin(n("./node_modules/transform-pouch/index.js"));class F{static logEvent(e,t){return R(this,void 0,void 0,(function*(){return T.logEvent({eventName:e,eventParams:t})}))}static setUser(e,t){return R(this,void 0,void 0,(function*(){return T.setUser({userId:e,userParams:t})}))}static setSessionParams(e){return R(this,void 0,void 0,(function*(){return T.setSessionParams(e)}))}static setDeviceParams(e){return R(this,void 0,void 0,(function*(){return T.setDeviceParams(e)}))}static setAppParams(e){return R(this,void 0,void 0,(function*(){return T.setAppParams(e)}))}static setUserParams(e){return R(this,void 0,void 0,(function*(){return T.setUserParams(e)}))}static init(e,t){return R(this,void 0,void 0,(function*(){F.config=Object.assign({},F.config,e);try{yield T.init(F.config,t)}catch(e){return!1}return F.isInitialized=!0,!0}))}static configure(e){return R(this,void 0,void 0,(function*(){return F.config=Object.assign({},F.config,e),yield T.configure(F.config),F.isConfigured=!0,!0}))}static syncWithCloudFunction(e){var t,n;return R(this,void 0,void 0,(function*(){if(!F.isConfigured)return Promise.reject({isConfigured:F.isConfigured});const r=null!==(n=null===(t=F.config)||void 0===t?void 0:t.cloudSinks)&&void 0!==n?n:[];if(!r||0===(null==r?void 0:r.length))return Promise.reject({cloudSinks:r});for(const t of r)if(t.enabled)try{const n=yield fetch(t.url,{method:"POST",body:JSON.stringify({data:e}),headers:Object.assign({},t.headers,{"Content-Type":"application/json"}),keepalive:!0});if(!n.ok||n.status>299)return F.logWithCloudFunction({level:"error",body:"error in RNDatalake.syncWithCloudFunction.fetch",res:n}),Promise.reject({res:n})}catch(e){return F.logWithCloudFunction({level:"error",body:"error in RNDatalake.syncWithCloudFunction.catch",error:e}),Promise.reject({error:e})}return!0}))}static logWithCloudFunction(e){var t;return R(this,void 0,void 0,(function*(){const n=null===(t=F.config)||void 0===t?void 0:t.cloudLog;if(n){if(!n.enabled)return!1;try{const t=yield fetch(n.url,{method:"POST",body:JSON.stringify({data:e}),headers:n.headers,keepalive:!0});return!(!t.ok||t.status>299)}catch(e){return!1}}return!1}))}static forceSync(){return R(this,void 0,void 0,(function*(){return T.forceSync()}))}}F.isInitialized=!1,F.isConfigured=!1,F.config={adapter:"indexeddb",PouchDb:I,syncCallback:F.syncWithCloudFunction,logToCloud:F.logWithCloudFunction,isProduction:!1,sessionTimeoutMillis:72e5,syncIntervalMillis:5e3,syncBatchSize:100,maxEventsStored:5e3,maxSessionsStored:200,maxDevicesStored:10,maxUsersStored:50,eventStaleMillis:864e5,sessionStaleMillis:1728e5,cloudLog:{enabled:!0,headers:{"x-api-key":"L1JdGSkWh3o1jFmVPJAJ8PQxgFphFve3ntCn2Zt8"},url:"https://uqlnigquo8.execute-api.ap-south-1.amazonaws.com/v1/app-datalake-logs"},cloudSinks:[{enabled:!0,headers:{"x-api-key":"DxjF3YrUPs7QpjpP0ZNEt5GoKn8DIGvSawAWExb1"},url:"https://oqhgaa9yjj.execute-api.ap-south-1.amazonaws.com/Production/curefit-app-events"}],clockSkewMillis:0}},"./node_modules/argsarray/index.js":function(e,t,n){"use strict";e.exports=function(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}},"./node_modules/immediate/lib/browser.js":function(e,t,n){"use strict";(function(t){var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,s=new i(d),u=t.document.createTextNode("");s.observe(u,{characterData:!0}),n=function(){u.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){d(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(d,0)};else{var c=new t.MessageChannel;c.port1.onmessage=d,n=function(){c.port2.postMessage(0)}}var a=[];function d(){var e,t;r=!0;for(var n=a.length;n;){for(t=a,a=[],e=-1;++e<n;)t[e]();n=a.length}r=!1}e.exports=function(e){1!==a.push(e)||r||n()}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/inherits/inherits_browser.js":function(e,t){e.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},"./node_modules/lie/lib/index.js":function(e,t,n){"use strict";(function(t){var r=n("./node_modules/immediate/lib/browser.js");function i(){}var o={},s=["REJECTED"],u=["FULFILLED"],c=["PENDING"];if(!t.browser)var a=["UNHANDLED"];function d(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t.browser||(this.handled=a),e!==i&&v(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function v(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var s=p((function(){t(i,r)}));"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}e.exports=d,d.prototype.catch=function(e){return this.then(null,e)},d.prototype.then=function(e,n){if("function"!=typeof e&&this.state===u||"function"!=typeof n&&this.state===s)return this;var r=new this.constructor(i);(t.browser||this.handled===a&&(this.handled=null),this.state!==c)?f(r,this.state===u?e:n,this.outcome):this.queue.push(new l(r,e,n));return r},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)v(e,r);else{e.state=u,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,n){e.state=s,e.outcome=n,t.browser||e.handled===a&&r((function(){e.handled===a&&t.emit("unhandledRejection",n,e)}));for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callRejected(n);return e},d.resolve=function(e){if(e instanceof this)return e;return o.resolve(new this(i),e)},d.reject=function(e){var t=new this(i);return o.reject(t,e)},d.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var s=new Array(n),u=0,c=-1,a=new this(i);for(;++c<n;)d(e[c],c);return a;function d(e,i){t.resolve(e).then((function(e){s[i]=e,++u!==n||r||(r=!0,o.resolve(a,s))}),(function(e){r||(r=!0,o.reject(a,e))}))}},d.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var s=-1,u=new this(i);for(;++s<n;)t.resolve(e[s]).then((function(e){r||(r=!0,o.resolve(u,e))}),(function(e){r||(r=!0,o.reject(u,e))}));return u}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/pouchdb-adapter-indexeddb/lib/index.es.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/pouchdb-binary-utils/lib/index-browser.es.js"),i=n("./node_modules/pouchdb-utils/lib/index-browser.es.js"),o=n("./node_modules/pouchdb-md5/lib/index-browser.es.js"),s=(n("./node_modules/pouchdb-collections/lib/index.es.js"),n("./node_modules/pouchdb-errors/lib/index.es.js")),u=n("./node_modules/pouchdb-merge/lib/index.es.js");function c(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})}var a=c(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),d=c(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function l(e){if(!/^\d+-/.test(e))return Object(s.p)(s.f);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function f(e,t,n){var r,o,u;n||(n={deterministic_revs:!0});var c={status:"available"};if(e._deleted&&(c.deleted=!0),t)if(e._id||(e._id=Object(i.v)()),o=Object(i.r)(e,n.deterministic_revs),e._rev){if((u=l(e._rev)).error)return u;e._rev_tree=[{pos:u.prefix,ids:[u.id,{status:"missing"},[[o,c,[]]]]}],r=u.prefix+1}else e._rev_tree=[{pos:1,ids:[o,c,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],o=1,s=r.length;o<s;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}(e._revisions,c),r=e._revisions.start,o=e._revisions.ids[0]),!e._rev_tree){if((u=l(e._rev)).error)return u;e._rev_tree=[{pos:r=u.prefix,ids:[o=u.id,c,[]]}]}Object(i.j)(e._id),e._rev=r+"-"+o;var f={metadata:{},data:{}};for(var h in e)if(Object.prototype.hasOwnProperty.call(e,h)){var v="_"===h[0];if(v&&!a[h]){var p=Object(s.p)(s.c,h);throw p.message=s.c.message+": "+h,p}v&&!d[h]?f.metadata[h.slice(1)]=e[h]:f.data[h]=e[h]}return f}var h=Number.MIN_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER+1,p=Number.MIN_SAFE_INTEGER+2,y=/[^a-zA-Z0-9_$]+|(^[^a-zA-Z_$])/g,m=/(\\.)|[^a-zA-Z0-9_$.]+|(^[^a-zA-Z_$])/g,_="\\".charCodeAt(0),b=/[^a-zA-Z0-9_$]+|(^[^a-zA-Z_$])/,g=/(\\.)|[^a-zA-Z0-9_$.]+|(^[^a-zA-Z_$])/;function w(e,t){var n=function(e){for(var n="",r=0;r<e.length;r++){var i=e.charCodeAt(r);i===_&&t||(n+="_c"+i+"_")}return n};return e.replace(t?m:y,n)}function j(e){if(!function e(t){for(var n of Object.keys(t)){if(r=n,void 0?g.test(r):b.test(r))return!0;if(null===t[n]||"boolean"==typeof t[n])return!0;if("object"==typeof t[n])return e(t[n])}var r}(e))return!1;var t=Array.isArray(e),n=t?[]:{};return Object.keys(e).forEach((function(r){var i=t?r:w(r);n[i]=null===e[r]?h:"boolean"==typeof e[r]?e[r]?p:v:"object"==typeof e[r]?j(e[r]):e[r]})),n}function k(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(Object(s.p)(s.d,n,t.type))}}function O(e,t,n,i){return delete n._attachments[e].stub,i?(n._attachments[e].data=t.attachments[n._attachments[e].digest].data,Promise.resolve()):new Promise((function(i){var o=t.attachments[n._attachments[e].digest].data;Object(r.h)(o,(function(t){n._attachments[e].data=Object(r.f)(t),delete n._attachments[e].length,i()}))}))}function x(e,t){return(e.views[t].options&&e.views[t].options.def&&e.views[t].options.def.fields||[]).map((function(e){return"string"==typeof e?e:Object.keys(e)[0]}))}function A(e){return"_find_idx/"+e.join("/")}var E=Math.pow(10,13);function S(e,t){var n=e.transaction.objectStore("docs");n.getAll(IDBKeyRange.bound("_design/","_design/")).onsuccess=function(e){var r=e.target.result,i=Array.from(n.indexNames),o=r.filter((function(e){return 0===e.deleted&&e.revs[e.rev].data.views})).map((function(e){return e.revs[e.rev].data})).reduce((function(e,t){return Object.keys(t.views).reduce((function(e,n){var r=x(t,n);return r&&r.length>0&&(e[A(r)]=function(e){return["deleted"].concat(e.map((function(e){return e in["_id","_rev","_deleted","_attachments"]?e.substr(1):"data."+w(e,!0)})))}(r)),e}),e)}),{}),s=Object.keys(o),u=["seq"];i.forEach((function(e){-1===u.indexOf(e)&&-1===s.indexOf(e)&&n.deleteIndex(e)}));var c=s.filter((function(e){return-1===i.indexOf(e)}));try{c.forEach((function(e){n.createIndex(e,o[e])}))}catch(e){t(e)}}}function I(e,t,n,r,o){var s=n.versionchanged?indexedDB.open(n.name):indexedDB.open(n.name,1*E+(new Date).getTime());s.onupgradeneeded=function(e){if(e.oldVersion>0&&e.oldVersion<E)throw new Error('Incorrect adapter: you should specify the "idb" adapter to open this DB');!function(e,t){t<1&&(e.createObjectStore("docs",{keyPath:"id"}).createIndex("seq","seq",{unique:!0}),e.createObjectStore("meta",{keyPath:"id"}))}(e.target.result,Math.floor(e.oldVersion/E)),S(s,o)},s.onblocked=function(e){},s.onsuccess=function(t){var o=t.target.result;o.onabort=function(t){delete e[n.name],o.close()},o.onversionchange=function(){e[n.name].versionchanged=!0,o.close()};var s={id:"meta"},u=o.transaction(["meta"],"readwrite");u.oncomplete=function(){r({idb:o,metadata:s})};var c=u.objectStore("meta");c.get("meta").onsuccess=function(e){var t=!1;"doc_count"in(s=e.target.result||s)||(t=!0,s.doc_count=0),"seq"in s||(t=!0,s.seq=0),"db_uuid"in s||(t=!0,s.db_uuid=Object(i.v)()),t&&c.put(s)}},s.onerror=function(e){o(e.target.error)}}function D(e,t,n){return e[n.name]&&!e[n.name].versionchanged||(n.versionchanged=e[n.name]&&e[n.name].versionchanged,e[n.name]=new Promise((function(t,r){I(e,0,n,t,r)}))),e[n.name]}function P(e,t,n,r){if(e.error)return r(e.error);e.txn.objectStore("docs").get(t).onsuccess=function(t){var i,o=t.target.result;if(i=n.rev?n.latest?Object(u.e)(n.rev,o):n.rev:o&&o.rev,o&&(!o.deleted||n.rev)&&i in o.revs){var c=o.revs[i].data;c._id=o.id,c._rev=i,r(null,{doc:c,metadata:o,ctx:e})}else r(Object(s.p)(s.h,"missing"))}}function M(e,t,n,i,o,s){if(e.error)return s(e.error);var u;e.txn.objectStore("docs").get(t).onsuccess=function(e){var t=e.target.result;u=t.attachments[t.revs[o.rev||t.rev].data._attachments[n].digest].data},e.txn.oncomplete=function(){!function(e,t,n){if(t.binary)return n(null,e);Object(r.h)(e,(function(e){n(null,Object(r.f)(e))}))}(u,o,s)},e.txn.onabort=s}function C(e,t,n,i,c,a,d){var l,h,v,p,y=[],m=[],_=c.revs_limit||1e3,b=-1===c.name.indexOf("-mrview-");function g(e){return/^_local/.test(e.id)?1:_}function w(e,t){var r=0,o={};function a(a){a.target.result&&(o[a.target.result.id]=a.target.result),++r===t.length&&function(e,t,r){t.forEach((function(t,o){var a;if("was_delete"in n&&!r.hasOwnProperty(t.id))a=Object(s.p)(s.h,"deleted");else if(n.new_edits&&!r.hasOwnProperty(t.id)&&function(e){return"missing"===e.rev_tree[0].ids[1].status}(t))a=Object(s.p)(s.n);else if(r.hasOwnProperty(t.id)){if(0==(a=function(e,t,r){if(t.rev in r.revs&&!n.new_edits)return!1;var i=/^1-/.test(t.rev);if(r.deleted&&!t.deleted&&n.new_edits&&i){var o=t.revs[t.rev].data;o._rev=r.rev,o._id=r.id,t=O(f(o,n.new_edits,c))}var a=Object(u.f)(r.rev_tree,t.rev_tree[0],g(t));t.stemmedRevs=a.stemmedRevs,t.rev_tree=a.tree;var d=r.revs;if(d[t.rev]=t.revs[t.rev],t.revs=d,t.attachments=r.attachments,n.new_edits&&(r.deleted&&t.deleted||!r.deleted&&"new_leaf"!==a.conflicts||r.deleted&&!t.deleted&&"new_branch"===a.conflicts||r.rev===t.rev))return Object(s.p)(s.n);return t.wasDeleted=r.deleted,t}(0,t,r[t.id])))return}else{var d=Object(u.f)([],t.rev_tree[0],g(t));t.rev_tree=d.tree,t.stemmedRevs=d.stemmedRevs,(a=t).isNewDoc=!0,a.wasDeleted=t.revs[t.rev].deleted?1:0}a.error?y[o]=a:(r[a.id]=a,v=o,function(e,t,n){var r=Object(u.j)(t),o=t.rev,c=/^_local/.test(t.id),a=t.revs[r].data;if(b){var d=j(a);d?(t.data=d,delete t.data._attachments):t.data=a}else t.data=a;if(t.rev=r,t.deleted=t.revs[r].deleted?1:0,!c){t.seq=++i.seq;var l=0;t.isNewDoc?l=t.deleted?0:1:t.wasDeleted!==t.deleted&&(l=t.deleted?-1:1),i.doc_count+=l}delete t.isNewDoc,delete t.wasDeleted,t.stemmedRevs&&t.stemmedRevs.forEach((function(e){delete t.revs[e]}));delete t.stemmedRevs,"attachments"in t||(t.attachments={});if(a._attachments)for(var f in a._attachments){var v=a._attachments[f];if(v.stub){if(!(v.digest in t.attachments))return h=Object(s.p)(s.j),void e.abort();t.attachments[v.digest].revs[o]=!0}else t.attachments[v.digest]=v,t.attachments[v.digest].revs={},t.attachments[v.digest].revs[o]=!0,a._attachments[f]={stub:!0,digest:v.digest,content_type:v.content_type,length:v.length,revpos:parseInt(o,10)}}if(c&&t.deleted)return e.objectStore("docs").delete(t.id).onsuccess=function(){y[n]={ok:!0,id:t.id,rev:"0-0"}},void x(n);e.objectStore("docs").put(t).onsuccess=function(){y[n]={ok:!0,id:t.id,rev:o},x(n)}}(e,a,o))}))}(e,t,o)}t.forEach((function(t){e.objectStore("docs").get(t.id).onsuccess=a}))}function O(e){var t={id:e.metadata.id,rev:e.metadata.rev,rev_tree:e.metadata.rev_tree,revs:e.metadata.revs||{}};return t.revs[t.rev]={data:e.data,deleted:e.metadata.deleted},t}function x(e){e===v&&l.objectStore("meta").put(i)}function A(e){if(e.stub)return Promise.resolve(e);var t;if("string"==typeof e.data){if((t=function(e){try{return atob(e)}catch(e){return{error:Object(s.p)(s.a,"Attachment is not a valid base64 string")}}}(e.data)).error)return Promise.reject(t.error);e.data=Object(r.c)(t,e.content_type)}else t=e.data;return new Promise((function(n){Object(o.a)(t,(function(r){e.digest="md5-"+r,e.length=t.size||t.length||0,n(e)}))}))}for(var E=0,S=t.docs.length;E<S;E++){var I;try{I=f(t.docs[E],n.new_edits,c)}catch(e){I=e}if(I.error)return d(I);m.push(O(I))}(p=m.map((function(e){var t=e.revs[e.rev].data;if(!t._attachments)return Promise.resolve(t);var n=Object.keys(t._attachments).map((function(e){return t._attachments[e].name=e,A(t._attachments[e])}));return Promise.all(n).then((function(e){var n={};return e.forEach((function(e){n[e.name]=e,delete e.name})),t._attachments=n,t}))})),Promise.all(p)).then((function(){e._openTransactionSafely(["docs","meta"],"readwrite",(function(e,t){if(e)return d(e);(l=t).onabort=function(){d(h)},l.ontimeout=k(d),l.oncomplete=function(){a.notify(c.name),d(null,y)},w(l,m)}))})).catch((function(e){d(e)}))}function q(e,t,n,r){if(e.error)return r(e.error);if(0===n.limit){var i={total_rows:t.doc_count,offset:n.skip,rows:[]};return n.update_seq&&(i.update_seq=t.seq),r(null,i)}var o,c=[],a=[],d="keys"in n&&n.keys,l=n.skip||0,f="number"==typeof n.limit?n.limit:-1,h="descending"in n&&n.descending?"prev":null;if(!d&&(o=function(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}("startkey"in n&&n.startkey,"endkey"in n&&n.endkey,!1!==n.inclusive_end,"key"in n&&n.key,h))&&o.error)return function(e,t,n,r){if("DataError"===n.name&&0===n.code){var i={total_rows:t.doc_count,offset:e.skip,rows:[]};return e.update_seq&&(i.update_seq=t.seq),r(null,i)}r(Object(s.p)(s.d,n.name,n.message))}(n,t,o.error,r);var v=e.txn.objectStore("docs");if(e.txn.oncomplete=function(){Promise.all(a).then((function(){var e={total_rows:t.doc_count,offset:0,rows:c};n.update_seq&&(e.update_seq=t.seq),r(null,e)}))},d)return function(e,t,n){var r=new Array(e.length),i=0;e.forEach((function(o,s){t.get(o).onsuccess=function(t){r[s]=t.target.result?t.target.result:{key:o,error:"not_found"},++i===e.length&&r.forEach((function(e){n(e)}))}}))}(n.keys,v,p);function p(e){if(e.error&&d)return c.push(e),!0;var t={id:e.id,key:e.id,value:{rev:e.rev}};if(e.deleted)d&&(c.push(t),t.value.deleted=!0,t.doc=null);else if(l--<=0&&(c.push(t),n.include_docs&&function(e,t){var r=t.revs[t.rev].data;if(e.doc=r,e.doc._id=t.id,e.doc._rev=t.rev,n.conflicts){var i=Object(u.a)(t);i.length&&(e.doc._conflicts=i)}if(n.attachments&&r._attachments)for(var o in r._attachments)a.push(O(o,t,e.doc,n.binary))}(t,e),0==--f))return!1;return!0}(h?v.openCursor(o,h):v.openCursor(o)).onsuccess=function(e){var t=e.target.result&&e.target.result.value;if(t){if(/^_local/.test(t.id))return e.target.result.continue();p(t)&&e.target.result.continue()}}}function $(e,t,n){if(e.error)return n(e.error);e.txn.objectStore("docs").get(t).onsuccess=function(e){e.target.result?n(null,e.target.result.rev_tree):n(Object(s.p)(s.h))}}function T(e,t,n,r){if(e.error)return r(e.error);var i=e.txn.objectStore("docs");i.get(t).onsuccess=function(e){var t=e.target.result;Object(u.i)(t.rev_tree,(function(e,t,r,i,o){-1!==n.indexOf(t+"-"+r)&&(o.status="missing")}));var r=[];n.forEach((function(e){if(e in t.revs){if(t.revs[e].data._attachments)for(var n in t.revs[e].data._attachments)r.push(t.revs[e].data._attachments[n].digest);delete t.revs[e]}})),r.forEach((function(e){n.forEach((function(n){delete t.attachments[e].revs[n]})),Object.keys(t.attachments[e].revs).length||delete t.attachments[e]})),i.put(t)},e.txn.oncomplete=function(){r()}}var B=Number.NEGATIVE_INFINITY,N=[[[[[[[[[[[[]]]]]]]]]]]];function U(e,t,n){var r=this,i=t.split("/");return new Promise((function(e,t){r.get("_design/"+i[0]).then((function(o){var s=x(o,i[1]);if(!s)throw new Error("ddoc "+o._id+" with view "+i[1]+" does not have map.options.def.fields defined.");var u=n.skip,c=Number.isInteger(n.limit)&&n.limit;return function e(t,n,r){var i=A(n);return new Promise((function(o){t._openTransactionSafely(["docs"],"readonly",(function(s,u){if(s)return k(r)(s);u.onabort=k(r),u.ontimeout=k(r),-1===Array.from(u.objectStore("docs").indexNames).indexOf(i)?t._freshen().then((function(){return e(t,n,r)})).then(o):o(u.objectStore("docs").index(i))}))}))}(r,s,t).then((function(r){var i=function(e){function t(e,t){return void 0!==e[t]}function n(e,t){return[0].concat(e).map((function(e){if(null===e&&t)return h;if(!0===e)return p;if(!1===e)return v;if(!t){if(null===e)return B;if(e.hasOwnProperty(""))return N}return e}))}if(t(e,"inclusive_end")||(e.inclusive_end=!0),t(e,"inclusive_start")||(e.inclusive_start=!0),e.descending){var r=e.startkey,i=e.inclusive_start;e.startkey=e.endkey,e.endkey=r,e.inclusive_start=e.inclusive_end,e.inclusive_end=i}try{return t(e,"key")?IDBKeyRange.only(n(e.key,!0)):t(e,"startkey")&&!t(e,"endkey")?IDBKeyRange.lowerBound(n(e.startkey),!e.inclusive_start):!t(e,"startkey")&&t(e,"endkey")?IDBKeyRange.upperBound(n(e.endkey),!e.inclusive_end):t(e,"startkey")&&t(e,"endkey")?IDBKeyRange.bound(n(e.startkey),n(e.endkey),!e.inclusive_start,!e.inclusive_end):IDBKeyRange.only([0])}catch(t){throw Error("Could not generate key range with "+JSON.stringify(e))}}(n),o=r.openCursor(i,n.descending?"prev":"next"),s=[];o.onerror=k(t),o.onsuccess=function(t){var n,r,i=t.target.result;return i&&0!==c?u?(i.advance(u),void(u=!1)):(c&&(c-=1),s.push({doc:(n=i.value,r=n.revs[n.rev].data,r._id=n.id,r._rev=n.rev,n.deleted&&(r._deleted=!0),r)}),void i.continue()):e({rows:s})}}))})).catch(t)}))}function R(){return Promise.resolve()}var F=new i.d,L={};function z(e,t){var n=this,r={},o=function(t){return function(){var i=Array.prototype.slice.call(arguments);D(L,0,e).then((function(e){r=e.metadata,i.unshift(e.idb),t.apply(n,i)})).catch((function(e){var t=i.unshift();"function"==typeof t&&t(e)}))}},s=function(t){return function(){var i=Array.prototype.slice.call(arguments);return new Promise((function(o,s){D(L,0,e).then((function(e){return r=e.metadata,i.unshift(e.idb),t.apply(n,i)})).then(o).catch(s)}))}},u=function(t,i,o){return i=i||["docs"],o=o||"readonly",function(){var s=Array.prototype.slice.call(arguments),u={};D(L,0,e).then((function(e){r=e.metadata,u.txn=e.idb.transaction(i,o),s.unshift(u),t.apply(n,s)})).catch((function(e){u.error=e}))}};n._openTransactionSafely=function(e,t,n){u((function(e,t){t(e.error,e.txn)}),e,t)(n)},n._remote=!1,n.type=function(){return"indexeddb"},n._id=o((function(e,t){t(null,r.db_uuid)})),n._info=o((function(e,t){return function(e,t){t(null,{doc_count:e.doc_count,update_seq:e.seq})}(r,t)})),n._get=u(P),n._bulkDocs=o((function(t,i,o,s){C(n,i,o,r,e,F,s)})),n._allDocs=u((function(e,t,n){q(e,r,t,n)})),n._getAttachment=u(M),n._changes=u((function(t,r){!function(e,t,n,r,o){if(e.error)return o.complete(e.error);if(o.continuous){var s=r.name+":"+Object(i.v)();return t.addListener(r.name,s,n,o),t.notify(r.name),{cancel:function(){t.removeListener(r.name,s)}}}var u="limit"in o?o.limit:-1;0===u&&(u=1);var c,a=e.txn.objectStore("docs").index("seq"),d=Object(i.f)(o),l=0,f=o.since||0,h=[],v=[];c=o.descending?a.openCursor(null,"prev"):a.openCursor(IDBKeyRange.lowerBound(o.since,!0)),e.txn.oncomplete=function(){Promise.all(v).then((function(){o.complete(null,{results:h,last_seq:f})}))},c.onsuccess=function(e){if(e.target.result){var t=e.target.result,n=t.value;if(n.data=n.revs[n.rev].data,n.data._id=n.id,n.data._rev=n.rev,n.deleted&&(n.data._deleted=!0),o.doc_ids&&-1===o.doc_ids.indexOf(n.id))return t.continue();var r=o.processChange(n.data,n,o);r.seq=n.seq,f=n.seq;var i=d(r);if("object"==typeof i)return o.complete(i);if(i)if(l++,o.return_docs&&h.push(r),o.include_docs&&o.attachments&&n.data._attachments){var s=[];for(var c in n.data._attachments){var a=O(c,n,r.doc,o.binary);s.push(a),v.push(a)}Promise.all(s).then((function(){o.onChange(r)}))}else o.onChange(r);l!==u&&t.continue()}}}(t,F,n,e,r)})),n._getRevisionTree=u($),n._doCompaction=u(T,["docs"],"readwrite"),n._customFindAbstractMapper={query:s(U),viewCleanup:s(R)},n._destroy=function(t,n){return function(e,t,n,r){function i(){indexedDB.deleteDatabase(e.name).onsuccess=function(){delete t[e.name],r(null,{ok:!0})}}n.removeAllListeners(e.name),e.name in t?t[e.name].then((function(e){e.idb.close(),i()})):i()}(e,L,F,n)},n._close=o((function(t,n){delete L[e.name],t.close(),n()})),n._freshen=function(){return new Promise((function(e){n._close((function(){o(e)()}))}))},setTimeout((function(){t(null,n)}))}z.valid=function(){return!0};t.default=function(e){e.adapter("indexeddb",z,!0)}},"./node_modules/pouchdb-binary-utils/lib/index-browser.es.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return a})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return c}));var r=function(e){return atob(e)},i=function(e){return btoa(e)};function o(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function s(e,t){return function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}([o(e)],{type:t})}function u(e,t){return s(r(e),t)}function c(e,t){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";if(r)return t(n);t(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}(n))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function a(e,t){c(e,(function(e){t(e)}))}function d(e,t){a(e,(function(e){t(i(e))}))}function l(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}},"./node_modules/pouchdb-collate/lib/index.es.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return a}));function r(e,t){if(e===t)return 0;e=i(e),t=i(t);var n=d(e),o=d(t);if(n-o!=0)return n-o;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++){var o=r(e[i],t[i]);if(0!==o)return o}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var n=Object.keys(e),i=Object.keys(t),o=Math.min(n.length,i.length),s=0;s<o;s++){var u=r(n[s],i[s]);if(0!==u)return u;if(0!==(u=r(e[n[s]],t[i[s]])))return u}return n.length===i.length?0:n.length>i.length?1:-1}(e,t)}function i(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=i(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var o in e={},t)if(t.hasOwnProperty(o)){var s=t[o];void 0!==s&&(e[o]=i(s))}}}return e}function o(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=(s=((r?-n:n)- -324).toString(),u="0",c=3,function(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}(s,u,c)+s);var s,u,c;i+=""+o;var a=Math.abs(parseFloat(t[0]));r&&(a=10-a);var d=a.toFixed(20);return d=d.replace(/\.?0+$/,""),i+=""+d}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=s(n[r]);else for(;++r<i;){var u=n[r];o+=s(u)+s(e[u])}return o}return""}function s(e){return d(e=i(e))+""+o(e)+"\0"}function u(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var i="0"===e[t];t++;var o="",s=e.substring(t,t+3),u=parseInt(s,10)+-324;for(i&&(u=-u),t+=3;;){var c=e[t];if("\0"===c)break;o+=c,t++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),i&&(n-=10),0!==u&&(n=parseFloat(n+"e"+u))}return{num:n,length:t-r}}function c(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){i[e.pop()]=n}else e.push(n)}}function a(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var o=u(e,r);t.push(o.num),r+=o.length;break;case"4":for(var s="";;){var a=e[r];if("\0"===a)break;s+=a,r++}s=s.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(s);break;case"5":var d={element:[],index:t.length};t.push(d.element),n.push(d);break;case"6":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();c(t,n)}}}function d(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}},"./node_modules/pouchdb-collections/lib/index.es.js":function(e,t,n){"use strict";function r(e){return"$"+e}function i(e){return e.substring(1)}function o(){this._store={}}function s(e){if(this._store=new o,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}var u,c;n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c})),o.prototype.get=function(e){var t=r(e);return this._store[t]},o.prototype.set=function(e,t){var n=r(e);return this._store[n]=t,!0},o.prototype.has=function(e){return r(e)in this._store},o.prototype.delete=function(e){var t=r(e),n=t in this._store;return delete this._store[t],n},o.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var o=t[n];e(this._store[o],o=i(o))}},Object.defineProperty(o.prototype,"size",{get:function(){return Object.keys(this._store).length}}),s.prototype.add=function(e){return this._store.set(e,!0)},s.prototype.has=function(e){return this._store.has(e)},s.prototype.forEach=function(e){this._store.forEach((function(t,n){e(n)}))},Object.defineProperty(s.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(u=s,c=o):(u=Set,c=Map)},"./node_modules/pouchdb-errors/lib/index.es.js":function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"n",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"i",(function(){return a})),n.d(t,"m",(function(){return d})),n.d(t,"o",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"l",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return p})),n.d(t,"k",(function(){return y})),n.d(t,"f",(function(){return _})),n.d(t,"j",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"p",(function(){return g})),n.d(t,"q",(function(){return w}));var r=n("./node_modules/inherits/inherits_browser.js");function i(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}n.n(r)()(i,Error),i.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new i(401,"unauthorized","Name or password is incorrect.");var o=new i(400,"bad_request","Missing JSON list of 'docs'"),s=new i(404,"not_found","missing"),u=new i(409,"conflict","Document update conflict"),c=new i(400,"bad_request","_id field must contain a string"),a=new i(412,"missing_id","_id is required for puts"),d=new i(400,"bad_request","Only reserved document ids may start with underscore."),l=(new i(412,"precondition_failed","Database not open"),new i(500,"unknown_error","Database encountered an unknown error")),f=new i(500,"badarg","Some query argument is invalid"),h=(new i(400,"invalid_request","Request was invalid"),new i(400,"query_parse_error","Some query parameter is invalid")),v=new i(500,"doc_validation","Bad special document member"),p=new i(400,"bad_request","Something wrong with the request"),y=new i(400,"bad_request","Document must be a JSON object"),m=(new i(404,"not_found","Database not found"),new i(500,"indexed_db_went_bad","unknown")),_=(new i(500,"web_sql_went_bad","unknown"),new i(500,"levelDB_went_went_bad","unknown"),new i(403,"forbidden","Forbidden by design doc validate_doc_update function"),new i(400,"bad_request","Invalid rev format")),b=(new i(412,"file_exists","The database could not be created, the file already exists."),new i(412,"missing_stub","A pre-existing attachment stub wasn't found"));new i(413,"invalid_url","Provided URL is invalid");function g(e,t){function n(t){for(var n=Object.getOwnPropertyNames(e),r=0,i=n.length;r<i;r++)"function"!=typeof e[n[r]]&&(this[n[r]]=e[n[r]]);void 0!==t&&(this.reason=t)}return n.prototype=i.prototype,new n(t)}function w(e){if("object"!=typeof e){var t=e;(e=l).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}},"./node_modules/pouchdb-extend/index.js":function(e,t,n){"use strict";for(var r={},i=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],o=0;o<i.length;o++){var s=i[o];r["[object "+s+"]"]=s.toLowerCase()}var u=r.toString,c=r.hasOwnProperty;function a(e){return null===e?String(e):"object"==typeof e||"function"==typeof e?r[u.call(e)]||"object":typeof e}function d(e){if(!e||"object"!==a(e)||e.nodeType||function(e){return null!==e&&e===e.window}(e))return!1;try{if(e.constructor&&!c.call(e,"constructor")&&!c.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var t;for(t in e);return void 0===t||c.call(e,t)}function l(e){return"function"===a(e)}var f=Array.isArray||function(e){return"array"===a(e)};function h(e,t,n){var r,i,o,s,u,c,a,h=t[0]||{},v=1,p=t.length,y=!1,m=/\d+/;for("boolean"==typeof h&&(y=h,h=t[1]||{},v=2),"object"==typeof h||l(h)||(h={}),p===v&&(h=this,--v);v<p;v++)if(null!=(r=t[v]))for(i in a=f(r),r)if(!(i in Object.prototype)){if(a&&!m.test(i))continue;if(o=h[i],h===(s=r[i]))continue;y&&s&&(d(s)||(u=f(s)))?(u?(u=!1,c=o&&f(o)?o:[]):c=o&&d(o)?o:{},e.push({args:[y,c,s],result:{container:h,key:i}})):void 0!==s&&(f(r)&&l(s)||(h[i]=s))}n.container[n.key]=h}e.exports=function(){for(var e=[],t=-1,n=arguments.length,r=new Array(n);++t<n;)r[t]=arguments[t];var i,o={};for(e.push({args:r,result:{container:o,key:"key"}});i=e.pop();)h(e,i.args,i.result);return o.key}},"./node_modules/pouchdb-fetch/lib/index-browser.es.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));"undefined"!=typeof AbortController&&AbortController;var r=fetch,i=Headers},"./node_modules/pouchdb-find/lib/index-browser.es.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/pouchdb-errors/lib/index.es.js"),i=n("./node_modules/pouchdb-fetch/lib/index-browser.es.js"),o=n("./node_modules/pouchdb-collections/lib/index.es.js"),s=n("./node_modules/pouchdb-binary-utils/lib/index-browser.es.js"),u=n("./node_modules/pouchdb-collate/lib/index.es.js"),c=n("./node_modules/pouchdb-utils/lib/index-browser.es.js"),a=n("./node_modules/pouchdb-md5/lib/index-browser.es.js"),d=n("./node_modules/argsarray/index.js"),l=n.n(d),f=n("./node_modules/inherits/inherits_browser.js"),h=n.n(f);function v(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,v)}catch(e){}}function p(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,p)}catch(e){}}function y(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,y)}catch(e){}}function m(e,t){return t&&e.then((function(e){Object(c.m)((function(){t(null,e)}))}),(function(e){Object(c.m)((function(){t(e)}))})),e}function _(e,t){return function(){var n=arguments,r=this;return e.add((function(){return t.apply(r,n)}))}}function b(e){var t=new o.b(e),n=new Array(t.size),r=-1;return t.forEach((function(e){n[++r]=e})),n}function g(e){var t=new Array(e.size),n=-1;return e.forEach((function(e,r){t[++n]=r})),t}function w(){this.promise=new Promise((function(e){e()}))}function j(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function k(e,t,n,r,i,o){var s,u=function(e,t){return j(e)+j(t)+"undefined"}(n,r);if(!i&&(s=e._cachedViews=e._cachedViews||{})[u])return s[u];var d=e.info().then((function(d){var l=d.db_name+"-mrview-"+(i?"temp":Object(a.b)(u));return Object(c.u)(e,"_local/"+o,(function(e){e.views=e.views||{};var n=t;-1===n.indexOf("/")&&(n=t+"/"+t);var r=e.views[n]=e.views[n]||{};if(!r[l])return r[l]=!0,e})).then((function(){return e.registerDependentDatabase(l).then((function(t){var i=t.db;i.auto_compaction=!0;var o={name:l,db:i,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return o.db.get("_local/lastSeq").catch((function(e){if(404!==e.status)throw e})).then((function(e){return o.seq=e?e.seq:0,s&&o.db.once("destroyed",(function(){delete s[u]})),o}))}))}))}));return s&&(s[u]=d),d}h()(v,Error),h()(p,Error),h()(y,Error),w.prototype.add=function(e){return this.promise=this.promise.catch((function(){})).then((function(){return e()})),this.promise},w.prototype.finish=function(){return this.promise};var O={},x=new w;function A(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function E(e,t){try{e.emit("error",t)}catch(e){Object(c.h)("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),Object(c.h)("error",t)}}var S=function(e,t,n,a){function d(e,t,n){try{t(n)}catch(t){E(e,t)}}function f(e,t,n,r,i){try{return{output:t(n,r,i)}}catch(t){return E(e,t),{error:t}}}function h(e,t){var n=Object(u.a)(e.key,t.key);return 0!==n?n:Object(u.a)(e.value,t.value)}function j(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function S(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function I(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&function(e){e.rows.forEach((function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach((function(e){var n=t[e];t[e].data=Object(s.b)(n.data,n.content_type)}))}))}(t),t}}function D(e,t,n,r){var i=t[e];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function P(e){if(void 0!==e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function M(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if(void 0!==e[n]&&void 0!==e[r]&&Object(u.a)(e[n],e[r])>0)throw new v("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new v("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new v("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach((function(t){var n=function(e){if(e){if("number"!=typeof e)return new v('Invalid value for integer: "'+e+'"');if(e<0)return new v('Invalid value for positive integer: "'+e+'"')}}(e[t]);if(n)throw n}))}function C(e){return function(t){if(404===t.status)return e;throw t}}function q(e,t,n){var r="_local/doc_"+e,i={_id:r,keys:[]},s=n.get(e),u=s[0];return(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(s[1])?Promise.resolve(i):t.db.get(r).catch(C(i))).then((function(e){return function(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):Promise.resolve({rows:[]})}(e).then((function(t){return function(e,t){for(var n=[],r=new o.b,i=0,s=t.rows.length;i<s;i++){var c=t.rows[i].doc;if(c&&(n.push(c),r.add(c._id),c._deleted=!u.has(c._id),!c._deleted)){var a=u.get(c._id);"value"in a&&(c.value=a.value)}}var d=g(u);return d.forEach((function(e){if(!r.has(e)){var t={_id:e},i=u.get(e);"value"in i&&(t.value=i.value),n.push(t)}})),e.keys=b(d.concat(e.keys)),n.push(e),n}(e,t)}))}))}function $(e){var t="string"==typeof e?e:e.name,n=O[t];return n||(n=O[t]=new w),n}function T(e){return _($(e),(function(){return function(e){var n,r;var i=t(e.mapFun,(function(e,t){var i={id:r._id,key:Object(u.b)(e)};null!=t&&(i.value=Object(u.b)(t)),n.push(i)})),s=e.seq||0;function a(t,n){return function(){return function(e,t,n){return e.db.get("_local/lastSeq").catch(C({_id:"_local/lastSeq",seq:0})).then((function(r){var i=g(t);return Promise.all(i.map((function(n){return q(n,e,t)}))).then((function(t){var i=Object(c.g)(t);return r.seq=n,i.push(r),e.db.bulkDocs({docs:i})}))}))}(e,t,n)}}var l=new w;function f(){return e.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:s,limit:50}).then(v)}function v(t){var u=t.results;if(u.length){var c=function(t){for(var u=new o.a,c=0,a=t.length;c<a;c++){var l=t[c];if("_"!==l.doc._id[0]){n=[],(r=l.doc)._deleted||d(e.sourceDB,i,r),n.sort(h);var f=p(n);u.set(l.doc._id,[f,l.changes])}s=l.seq}return u}(u);if(l.add(a(c,s)),!(u.length<50))return f()}}function p(e){for(var t,n=new o.a,r=0,i=e.length;r<i;r++){var s=e[r],c=[s.key,s.id];r>0&&0===Object(u.a)(s.key,t)&&c.push(r),n.set(Object(u.d)(c),s),t=s.key}return n}return f().then((function(){return l.finish()})).then((function(){e.seq=s}))}(e)}))()}function B(e,t){return _($(e),(function(){return function(e,t){var r,i=e.reduceFun&&!1!==t.reduce,s=t.skip||0;void 0===t.keys||t.keys.length||(t.limit=0,delete t.keys);function a(t){return t.include_docs=!0,e.db.allDocs(t).then((function(e){return r=e.total_rows,e.rows.map((function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||t>n))return e.doc.value}var r=Object(u.c)(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}}))}))}function d(c){var a;if(a=i?function(e,t,r){0===r.group_level&&delete r.group_level;var i=r.group||r.group_level,o=n(e.reduceFun),s=[],c=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;t.forEach((function(e){var t=s[s.length-1],n=i?e.key:null;if(i&&Array.isArray(n)&&(n=n.slice(0,c)),t&&0===Object(u.a)(t.groupKey,n))return t.keys.push([e.key,e.id]),void t.values.push(e.value);s.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})})),t=[];for(var a=0,d=s.length;a<d;a++){var l=s[a],h=f(e.sourceDB,o,l.keys,l.values,!1);if(h.error&&h.error instanceof y)throw h.error;t.push({value:h.error?null:h.output,key:l.groupKey})}return{rows:j(t,r.limit,r.skip)}}(e,c,t):{total_rows:r,offset:s,rows:c},t.update_seq&&(a.update_seq=e.seq),t.include_docs){var d=b(c.map(S));return e.sourceDB.allDocs({keys:d,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then((function(e){var t=new o.a;return e.rows.forEach((function(e){t.set(e.id,e.doc)})),c.forEach((function(e){var n=S(e),r=t.get(n);r&&(e.doc=r)})),a}))}return a}if(void 0!==t.keys){var l=t.keys.map((function(e){var n={startkey:Object(u.d)([e]),endkey:Object(u.d)([e,{}])};return t.update_seq&&(n.update_seq=!0),a(n)}));return Promise.all(l).then(c.g).then(d)}var h,v,p={descending:t.descending};if(t.update_seq&&(p.update_seq=!0),"start_key"in t&&(h=t.start_key),"startkey"in t&&(h=t.startkey),"end_key"in t&&(v=t.end_key),"endkey"in t&&(v=t.endkey),void 0!==h&&(p.startkey=t.descending?Object(u.d)([h,{}]):Object(u.d)([h])),void 0!==v){var m=!1!==t.inclusive_end;t.descending&&(m=!m),p.endkey=Object(u.d)(m?[v,{}]:[v])}if(void 0!==t.key){var _=Object(u.d)([t.key]),g=Object(u.d)([t.key,{}]);p.descending?(p.endkey=_,p.startkey=g):(p.startkey=_,p.endkey=g)}return i||("number"==typeof t.limit&&(p.limit=t.limit),p.skip=s),a(p).then(d)}(e,t)}))()}function N(t,n,o){if("function"==typeof t._query)return function(e,t,n){return new Promise((function(r,i){e._query(t,n,(function(e,t){if(e)return i(e);r(t)}))}))}(t,n,o);if(Object(c.k)(t))return function(e,t,n){var o,s,u,c=[],a="GET";if(D("reduce",n,c),D("include_docs",n,c),D("attachments",n,c),D("limit",n,c),D("descending",n,c),D("group",n,c),D("group_level",n,c),D("skip",n,c),D("stale",n,c),D("conflicts",n,c),D("startkey",n,c,!0),D("start_key",n,c,!0),D("endkey",n,c,!0),D("end_key",n,c,!0),D("inclusive_end",n,c),D("key",n,c,!0),D("update_seq",n,c),c=""===(c=c.join("&"))?"":"?"+c,void 0!==n.keys){var d="keys="+encodeURIComponent(JSON.stringify(n.keys));d.length+c.length+1<=2e3?c+=("?"===c[0]?"&":"?")+d:(a="POST","string"==typeof t?o={keys:n.keys}:t.keys=n.keys)}if("string"==typeof t){var l=A(t);return e.fetch("_design/"+l[0]+"/_view/"+l[1]+c,{headers:new i.a({"Content-Type":"application/json"}),method:a,body:JSON.stringify(o)}).then((function(e){return s=e.ok,u=e.status,e.json()})).then((function(e){if(!s)throw e.status=u,Object(r.q)(e);return e.rows.forEach((function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)})),e})).then(I(n))}return o=o||{},Object.keys(t).forEach((function(e){o[e]=Array.isArray(t[e])?t[e]:t[e].toString()})),e.fetch("_temp_view"+c,{headers:new i.a({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(o)}).then((function(e){return s=e.ok,u=e.status,e.json()})).then((function(e){if(!s)throw e.status=u,Object(r.q)(e);return e})).then(I(n))}(t,n,o);if("string"!=typeof n)return M(o,n),x.add((function(){return k(t,"temp_view/temp_view",n.map,n.reduce,!0,e).then((function(e){return t=T(e).then((function(){return B(e,o)})),n=function(){return e.db.destroy()},t.then((function(e){return n().then((function(){return e}))}),(function(e){return n().then((function(){throw e}))}));var t,n}))})),x.finish();var s=n,u=A(s),d=u[1];return t.get("_design/"+u[0]).then((function(n){var r=n.views&&n.views[d];if(!r)throw new p("ddoc "+n._id+" has no view named "+d);return a(n,d),M(o,r),k(t,s,r.map,r.reduce,!1,e).then((function(e){return"ok"===o.stale||"update_after"===o.stale?("update_after"===o.stale&&Object(c.m)((function(){T(e)})),B(e,o)):T(e).then((function(){return B(e,o)}))}))}))}var U;return{query:function(e,t,n){var r=this;"function"==typeof t&&(n=t,t={}),t=t?function(e){return e.group_level=P(e.group_level),e.limit=P(e.limit),e.skip=P(e.skip),e}(t):{},"function"==typeof e&&(e={map:e});var i=Promise.resolve().then((function(){return N(r,e,t)}));return m(i,n),i},viewCleanup:(U=function(){var t=this;return"function"==typeof t._viewCleanup?function(e){return new Promise((function(t,n){e._viewCleanup((function(e,r){if(e)return n(e);t(r)}))}))}(t):Object(c.k)(t)?function(e){return e.fetch("_view_cleanup",{headers:new i.a({"Content-Type":"application/json"}),method:"POST"}).then((function(e){return e.json()}))}(t):function(t){return t.get("_local/"+e).then((function(e){var n=new o.a;Object.keys(e.views).forEach((function(e){var t=A(e),r="_design/"+t[0],i=t[1],s=n.get(r);s||(s=new o.b,n.set(r,s)),s.add(i)}));var r={keys:g(n),include_docs:!0};return t.allDocs(r).then((function(r){var i={};r.rows.forEach((function(t){var r=t.key.substring(8);n.get(t.key).forEach((function(n){var o=r+"/"+n;e.views[o]||(o=n);var s=Object.keys(e.views[o]),u=t.doc&&t.doc.views&&t.doc.views[n];s.forEach((function(e){i[e]=i[e]||u}))}))}));var o=Object.keys(i).filter((function(e){return!i[e]})).map((function(e){return _($(e),(function(){return new t.constructor(e,t.__opts).destroy()}))()}));return Promise.all(o).then((function(){return{ok:!0}}))}))}),C({ok:!0}))}(t)},l()((function(e){var t=e.pop(),n=U.apply(this,e);return"function"==typeof t&&m(n,t),n})))}},I=n("./node_modules/pouchdb-selector-core/lib/index.es.js");function D(e){return(e=Object(c.e)(e)).index||(e.index={}),["type","name","ddoc"].forEach((function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])})),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}function P(e,t,n,o){var s,u;n.headers=new i.a({"Content-type":"application/json"}),e.fetch(t,n).then((function(e){return s=e.status,u=e.ok,e.json()})).then((function(e){if(u)o(null,e);else{e.status=s;var t=Object(r.q)(e);o(t)}})).catch(o)}function M(e,t,n){t=D(t),P(e,"_index",{method:"POST",body:JSON.stringify(t)},n)}function C(e,t,n){P(e,"_find",{method:"POST",body:JSON.stringify(t)},n)}function q(e,t,n){P(e,"_explain",{method:"POST",body:JSON.stringify(t)},n)}function $(e,t){P(e,"_index",{method:"GET"},t)}function T(e,t,n){var r=t.ddoc,i=t.name;return r?i?void P(e,"_index/"+[r,t.type||"json",i].map(encodeURIComponent).join("/"),{method:"DELETE"},n):n(new Error("you must provide an index's name")):n(new Error("you must provide an index's ddoc"))}function B(e){return function(){for(var t=arguments.length,n=new Array(t),r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}}function N(e){return B((function(t){var n=t.pop(),r=e.apply(this,t);return function(e,t){e.then((function(e){Object(c.m)((function(){t(null,e)}))}),(function(e){Object(c.m)((function(){t(e)}))}))}(r,n),r}))}var U=B((function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?t=t.concat(U.apply(null,i)):t.push(i)}return t}));function R(e){for(var t={},n=0,r=e.length;n<r;n++)t=Object(c.b)(t,e[n]);return t}function F(e,t){for(var n=0,r=Math.min(e.length,t.length);n<r;n++)if(e[n]!==t[n])return!1;return!0}function L(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function z(e,t){var n=function(e){for(var t=0,n=e.length;t<n;t++){if(-1!==e[t].indexOf("."))return!1}return!0}(e),r=1===e.length;return n?r?function(e,t){return function(n){t(n[e])}}(e[0],t):function(e,t){return function(n){for(var r=[],i=0,o=e.length;i<o;i++)r.push(n[e[i]]);t(r)}}(e,t):r?function(e,t){var n=Object(I.h)(e);return function(e){for(var r=e,i=0,o=n.length;i<o;i++){if(void 0===(r=r[n[i]]))return}t(r)}}(e[0],t):function(e,t){return function(n){for(var r=[],i=0,o=e.length;i<o;i++){for(var s=Object(I.h)(e[i]),u=n,c=0,a=s.length;c<a;c++){if(void 0===(u=u[s[c]]))return}r.push(u)}t(r)}}(e,t)}var V=S("indexes",(function(e,t){return z(Object.keys(e.fields),t)}),(function(){throw new Error("reduce not supported")}),(function(e,t){var n=e.views[t];if(!n.map||!n.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}));function W(e){return e._customFindAbstractMapper||V}function J(e){return e.fields=e.fields.map((function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e})),e}function K(e,t){for(var n=[],r=0;r<t.def.fields.length;r++){var i=Object(I.d)(t.def.fields[r]);n.push(e[i])}return n}function G(e){return e.allDocs({startkey:"_design/",endkey:"_design/",include_docs:!0}).then((function(e){var t={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return t.indexes=U(t.indexes,e.rows.filter((function(e){return"query"===e.doc.language})).map((function(e){return(void 0!==e.doc.views?Object.keys(e.doc.views):[]).map((function(t){return{ddoc:e.id,name:t,type:"json",def:J(e.doc.views[t].options.def)}}))}))),t.indexes.sort((function(e,t){return Object(I.a)(e.name,t.name)})),t.total_rows=t.indexes.length,t}))}var Q={"":{}};const Z={queryOpts:{limit:0,startkey:Q,endkey:null},inMemoryFields:[]};function X(e,t){for(var n=e.def.fields.map(I.d),r=0,i=n.length;r<i;r++){if(t===n[r])return!0}return!1}function Y(e,t){var n=e[t];return"$eq"!==Object(I.d)(n)}function H(e,t){var n=t.def.fields.map(I.d);return e.slice().sort((function(e,t){var r=n.indexOf(e),i=n.indexOf(t);return-1===r&&(r=Number.MAX_VALUE),-1===i&&(i=Number.MAX_VALUE),Object(I.a)(r,i)}))}function ee(e,t,n,r){var i=U(e,function(e,t,n){for(var r=!1,i=0,o=(n=H(n,e)).length;i<o;i++){var s=n[i];if(r||!X(e,s))return n.slice(i);i<o-1&&Y(t,s)&&(r=!0)}return[]}(t,n,r),function(e){var t=[];return Object.keys(e).forEach((function(n){Object.keys(e[n]).forEach((function(e){"$ne"===e&&t.push(n)}))})),t}(n));return H(function(e){for(var t={},n=0;n<e.length;n++)t["$"+e[n]]=!0;return Object.keys(t).map((function(e){return e.substring(1)}))}(i),t)}function te(e,t,n){if(t){var r=!((o=t).length>(s=e).length)&&F(o,s),i=F(n,e);return r&&i}var o,s;return function(e,t){e=e.slice();for(var n=0,r=t.length;n<r;n++){var i=t[n];if(!e.length)break;var o=e.indexOf(i);if(-1===o)return!1;e.splice(o,1)}return!0}(n,e)}var ne=["$eq","$gt","$gte","$lt","$lte"];function re(e){return-1===ne.indexOf(e)}function ie(e,t,n,r){var i=e.def.fields.map(I.d);return!!te(i,t,n)&&function(e,t){var n=t[e[0]];return void 0===n||!(1===Object.keys(n).length&&"$ne"===Object(I.d)(n))}(i,r)}function oe(e,t,n,r,i){var o=function(e,t,n,r){return r.filter((function(r){return ie(r,n,t,e)}))}(e,t,n,r);if(0===o.length){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};var s=r[0];return s.defaultUsed=!0,s}if(1===o.length&&!i)return o[0];var u=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}(t);if(i){var c="_design/"+i[0],a=2===i.length&&i[1],d=o.find((function(e){return!(!a||e.ddoc!==c||a!==e.name)||e.ddoc===c}));if(!d)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return d}return function(e,t){for(var n=null,r=-1,i=0,o=e.length;i<o;i++){var s=e[i],u=t(s);u>r&&(r=u,n=s)}return n}(o,(function(e){for(var t=e.def.fields.map(I.d),n=0,r=0,i=t.length;r<i;r++){u[t[r]]&&n++}return n}))}function se(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function ue(e,t){return t.defaultUsed?function(e){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]}}(e):1===t.def.fields.length?function(e,t){var n,r=Object(I.d)(t.def.fields[0]),i=e[r]||{},o=[];return Object.keys(i).forEach((function(e){re(e)&&o.push(r);var t=function(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}return{startkey:null}}(e,i[e]);n=n?R([n,t]):t})),{queryOpts:n,inMemoryFields:o}}(e,t):function(e,t){var n,r,i=t.def.fields.map(I.d),o=[],s=[],u=[];function c(e){!1!==n&&s.push(null),!1!==r&&u.push(Q),o=i.slice(e)}for(var a=0,d=i.length;a<d;a++){var l=e[i[a]];if(!l||!Object.keys(l).length){c(a);break}if(Object.keys(l).some(re)){c(a);break}if(a>0){var f="$gt"in l||"$gte"in l||"$lt"in l||"$lte"in l,h=Object.keys(e[i[a-1]]),v=L(h,["$eq"]),p=L(h,Object.keys(l));if(f&&!v&&!p){c(a);break}}for(var y=Object.keys(l),m=null,_=0;_<y.length;_++){var b=y[_],g=se(b,l[b]);m=m?R([m,g]):g}s.push("startkey"in m?m.startkey:null),u.push("endkey"in m?m.endkey:Q),"inclusive_start"in m&&(n=m.inclusive_start),"inclusive_end"in m&&(r=m.inclusive_end)}var w={startkey:s,endkey:u};return void 0!==n&&(w.inclusive_start=n),void 0!==r&&(w.inclusive_end=r),{queryOpts:w,inMemoryFields:o}}(e,t)}function ce(e,t){var n=e.selector,r=e.sort;if(function(e){return Object.keys(e).map((function(t){return e[t]})).some((function(e){return"object"==typeof e&&0===Object.keys(e).length}))}(n))return Object(c.b)({},Z,{index:t[0]});var i=function(e,t){var n,r=Object.keys(e),i=t?t.map(I.d):[];return n=r.length>=i.length?r:i,0===i.length?{fields:n}:{fields:n=n.sort((function(e,t){var n=i.indexOf(e);-1===n&&(n=Number.MAX_VALUE);var r=i.indexOf(t);return-1===r&&(r=Number.MAX_VALUE),n<r?-1:n>r?1:0})),sortOrder:t.map(I.d)}}(n,r),o=i.fields,s=oe(n,o,i.sortOrder,t,e.use_index),u=ue(n,s);return{queryOpts:u.queryOpts,index:s,inMemoryFields:ee(u.inMemoryFields,s,n,o)}}function ae(e,t,n){var r,i;return t.selector&&(t.selector=Object(I.f)(t.selector)),t.sort&&(t.sort=function(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map((function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e}))}(t.sort)),t.use_index&&(t.use_index=(i=[],"string"==typeof(r=t.use_index)?i.push(r):i=r,i.map((function(e){return e.replace("_design/","")})))),function(e){if("object"!=typeof e.selector)throw new Error("you must provide a selector when you find()")}(t),G(e).then((function(r){e.constructor.emit("debug",["find","planning query",t]);var i=ce(t,r.indexes);e.constructor.emit("debug",["find","query plan",i]);var o=i.index;!function(e,t){if(t.defaultUsed&&e.sort){var n=e.sort.filter((function(e){return"_id"!==Object.keys(e)[0]})).map((function(e){return Object.keys(e)[0]}));if(n.length>0)throw new Error('Cannot sort on field(s) "'+n.join(",")+'" when using the default index')}}(t,o);var s=Object(c.b)({include_docs:!0,reduce:!1,indexes_count:r.total_rows},i.queryOpts);return"startkey"in s&&"endkey"in s&&Object(u.a)(s.startkey,s.endkey)>0?{docs:[]}:(t.sort&&"string"!=typeof t.sort[0]&&"desc"===Object(I.e)(t.sort[0])&&(s.descending=!0,s=function(e){var t=Object(c.e)(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}(s)),i.inMemoryFields.length||("limit"in t&&(s.limit=t.limit),"skip"in t&&(s.skip=t.skip)),n?Promise.resolve(i,s):Promise.resolve().then((function(){if("_all_docs"===o.name)return function(e,t){var n=Object(c.e)(t);return n.descending?("endkey"in n&&"string"!=typeof n.endkey&&(n.endkey=""),"startkey"in n&&"string"!=typeof n.startkey&&(n.limit=0)):("startkey"in n&&"string"!=typeof n.startkey&&(n.startkey=""),"endkey"in n&&"string"!=typeof n.endkey&&(n.limit=0)),"key"in n&&"string"!=typeof n.key&&(n.limit=0),n.limit>0&&n.indexes_count&&(n.original_limit=n.limit,n.limit+=n.indexes_count),e.allDocs(n).then((function(e){return e.rows=e.rows.filter((function(e){return!/^_design\//.test(e.id)})),n.original_limit&&(n.limit=n.original_limit),e.rows=e.rows.slice(0,n.limit),e}))}(e,s);var t,n=(t=o).ddoc.substring(8)+"/"+t.name;return W(e).query.call(e,n,s)})).then((function(e){!1===s.inclusive_start&&(e.rows=function(e,t,n){for(var r=n.def.fields,i=0,o=e.length;i<o;i++){var s=K(e[i].doc,n);if(1===r.length)s=s[0];else for(;s.length>t.length;)s.pop();if(Math.abs(Object(u.a)(s,t))>0)break}return i>0?e.slice(i):e}(e.rows,s.startkey,o)),i.inMemoryFields.length&&(e.rows=Object(I.b)(e.rows,t,i.inMemoryFields));var n={docs:e.rows.map((function(e){var n=e.doc;return t.fields?function(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=Object(I.h)(t[r]),s=Object(I.c)(e,o);void 0!==s&&Object(I.i)(n,o,s)}return n}(n,t.fields):n}))};return o.defaultUsed&&(n.warning="No matching index found, create an index to optimize query time."),n})))}))}var de=N((function(e,t){t=D(t);var n,r=Object(c.e)(t.index);function i(){return n||(n=Object(a.b)(JSON.stringify(t)))}t.index=J(t.index),function(e){var t=e.fields.filter((function(e){return"asc"===Object(I.e)(e)}));if(0!==t.length&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}(t.index);var o=t.name||"idx-"+i(),s=t.ddoc||"idx-"+i(),u="_design/"+s,d=!1,l=!1;return e.constructor.emit("debug",["find","creating index",u]),Object(c.u)(e,u,(function(e){return e._rev&&"query"!==e.language&&(d=!0),e.language="query",e.views=e.views||{},!(l=!!e.views[o])&&(e.views[o]={map:{fields:R(t.index.fields)},reduce:"_count",options:{def:r}},e)})).then((function(){if(d)throw new Error('invalid language for ddoc with id "'+u+'" (should be "query")')})).then((function(){var t=s+"/"+o;return W(e).query.call(e,t,{limit:0,reduce:!1}).then((function(){return{id:u,name:o,result:l?"exists":"created"}}))}))})),le=N(ae),fe=N((function(e,t){return ae(e,t,!0).then((function(n){return{dbname:e.name,index:n.index,selector:t.selector,range:{start_key:n.queryOpts.startkey,end_key:n.queryOpts.endkey},opts:{use_index:t.use_index||[],bookmark:"nil",limit:t.limit,skip:t.skip,sort:t.sort||{},fields:t.fields,conflicts:!1,r:[49]},limit:t.limit,skip:t.skip||0,fields:t.fields}}))})),he=N(G),ve=N((function(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var n=t.ddoc,r=t.name;return Object(c.u)(e,n,(function(e){return 1===Object.keys(e.views).length&&e.views[r]?{_id:n,_deleted:!0}:(delete e.views[r],e)})).then((function(){return W(e).viewCleanup.apply(e)})).then((function(){return{ok:!0}}))})),pe={};pe.createIndex=Object(c.t)((function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to create"));(Object(c.k)(this)?M:de)(this,e,t)})),pe.find=Object(c.t)((function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to find()"));(Object(c.k)(this)?C:le)(this,e,t)})),pe.explain=Object(c.t)((function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to explain()"));(Object(c.k)(this)?q:fe)(this,e,t)})),pe.getIndexes=Object(c.t)((function(e){(Object(c.k)(this)?$:he)(this,e)})),pe.deleteIndex=Object(c.t)((function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to delete"));(Object(c.k)(this)?T:ve)(this,e,t)}));t.default=pe},"./node_modules/pouchdb-md5/lib/index-browser.es.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return d}));var r=n("./node_modules/pouchdb-binary-utils/lib/index-browser.es.js"),i=n("./node_modules/spark-md5/spark-md5.js"),o=n.n(i),s=self.setImmediate||self.setTimeout;function u(e,t,n,i,o){(n>0||i<t.size)&&(t=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}(t,n,i)),Object(r.g)(t,(function(t){e.append(t),o()}))}function c(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function a(e,t){var n="string"==typeof e,i=n?e.length:e.size,a=Math.min(32768,i),d=Math.ceil(i/a),l=0,f=n?new o.a:new o.a.ArrayBuffer,h=n?c:u;function v(){s(y)}function p(){var e=function(e){return Object(r.f)(e)}(f.end(!0));t(e),f.destroy()}function y(){var t=l*a,n=t+a;l++,h(f,e,t,n,l<d?v:p)}y()}function d(e){return o.a.hash(e)}},"./node_modules/pouchdb-merge/lib/index.es.js":function(e,t,n){"use strict";function r(e){for(var t,n,r,i,o=e.rev_tree.slice();i=o.pop();){var s=i.ids,u=s[2],c=i.pos;if(u.length)for(var a=0,d=u.length;a<d;a++)o.push({pos:c+1,ids:u[a]});else{var l=!!s[1].deleted,f=s[0];t&&!(r!==l?r:n!==c?n<c:t<f)||(t=f,n=c,r=l)}}return n+"-"+t}function i(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,o=n.ids,s=o[2],u=t(0===s.length,i,o[0],n.ctx,o[1]),c=0,a=s.length;c<a;c++)r.push({pos:i+1,ids:s[c],ctx:u})}function o(e,t){return e.pos-t.pos}function s(e){var t=[];i(e,(function(e,n,r,i,o){e&&t.push({rev:n+"-"+r,pos:n,opts:o})})),t.sort(o).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function u(e){for(var t=r(e),n=s(e.rev_tree),i=[],o=0,u=n.length;o<u;o++){var c=n[o];c.rev===t||c.opts.deleted||i.push(c.rev)}return i}function c(e){for(var t,n=[],r=e.slice();t=r.pop();){var i=t.pos,o=t.ids,s=o[0],u=o[1],c=o[2],a=0===c.length,d=t.history?t.history.slice():[];d.push({id:s,opts:u}),a&&n.push({pos:i+1-d.length,ids:d});for(var l=0,f=c.length;l<f;l++)r.push({pos:i+1,ids:c[l],history:d})}return n.reverse()}function a(e,t){return e.pos-t.pos}function d(e,t,n){var r=function(e,t,n){for(var r,i=0,o=e.length;i<o;)n(e[r=i+o>>>1],t)<0?i=r+1:o=r;return i}(e,t,n);e.splice(r,0,t)}function l(e,t){for(var n,r,i=t,o=e.length;i<o;i++){var s=e[i],u=[s.id,s.opts,[]];r?(r[2].push(u),r=u):n=r=u}return n}function f(e,t){return e[0]<t[0]?-1:1}function h(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),o=i.tree1,s=i.tree2;(o[1].status||s[1].status)&&(o[1].status="available"===o[1].status||"available"===s[1].status?"available":"missing");for(var u=0;u<s[2].length;u++)if(o[2][0]){for(var c=!1,a=0;a<o[2].length;a++)o[2][a][0]===s[2][u][0]&&(n.push({tree1:o[2][a],tree2:s[2][u]}),c=!0);c||(r="new_branch",d(o[2],s[2][u],f))}else r="new_leaf",o[2][0]=s[2][u]}return{conflicts:r,tree:e}}function v(e,t,n){var r,i=[],o=!1,s=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var u=0,c=e.length;u<c;u++){var d=e[u];if(d.pos===t.pos&&d.ids[0]===t.ids[0])r=h(d.ids,t.ids),i.push({pos:d.pos,ids:r.tree}),o=o||r.conflicts,s=!0;else if(!0!==n){var l=d.pos<t.pos?d:t,f=d.pos<t.pos?t:d,v=[],p=[];for(p.push({ids:l.ids,diff:f.pos-l.pos,parent:null,parentIdx:null});p.length>0;){var y=p.pop();if(0!==y.diff)for(var m=y.ids[2],_=0,b=m.length;_<b;_++)p.push({ids:m[_],diff:y.diff-1,parent:y.ids,parentIdx:_});else y.ids[0]===f.ids[0]&&v.push(y)}var g=v[0];g?(r=h(g.ids,f.ids),g.parent[2][g.parentIdx]=r.tree,i.push({pos:l.pos,ids:l.ids}),o=o||r.conflicts,s=!0):i.push(d)}else i.push(d)}return s||i.push(t),i.sort(a),{tree:i,conflicts:o||"internal_node"}}function p(e,t,n){var r=v(e,t),o=function(e,t){for(var n,r,o=c(e),s=0,u=o.length;s<u;s++){var a,d=o[s],f=d.ids;if(f.length>t){n||(n={});var h=f.length-t;a={pos:d.pos+h,ids:l(f,h)};for(var p=0;p<h;p++){n[d.pos+p+"-"+f[p].id]=!0}}else a={pos:d.pos,ids:l(f,0)};r=r?v(r,a,!0).tree:[a]}return n&&i(r,(function(e,t,r){delete n[t+"-"+r]})),{tree:r,revs:n?Object.keys(n):[]}}(r.tree,n);return{tree:o.tree,stemmedRevs:o.revs,conflicts:r.conflicts}}function y(e,t){for(var n,r=e.slice(),i=t.split("-"),o=parseInt(i[0],10),s=i[1];n=r.pop();){if(n.pos===o&&n.ids[0]===s)return!0;for(var u=n.ids[2],c=0,a=u.length;c<a;c++)r.push({pos:n.pos+1,ids:u[c]})}return!1}function m(e){return e.ids}function _(e,t){t||(t=r(e));for(var n,i=t.substring(t.indexOf("-")+1),o=e.rev_tree.map(m);n=o.pop();){if(n[0]===i)return!!n[1].deleted;o=o.concat(n[2])}}function b(e){return/^_local/.test(e)}function g(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,o=n.ids,s=o[0],u=o[1],c=o[2],a=0===c.length,d=n.history?n.history.slice():[];if(d.push({id:s,pos:i,opts:u}),a)for(var l=0,f=d.length;l<f;l++){var h=d[l];if(h.pos+"-"+h.id===e)return i+"-"+s}for(var v=0,p=c.length;v<p;v++)r.push({pos:i+1,ids:c[v],history:d})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return r})),n.d(t,"e",(function(){return g}))},"./node_modules/pouchdb-promise/lib/index.js":function(e,t,n){"use strict";var r,i=(r=n("./node_modules/lie/lib/index.js"))&&"object"==typeof r&&"default"in r?r.default:r;e.exports="function"==typeof Promise?Promise:i},"./node_modules/pouchdb-selector-core/lib/index.es.js":function(e,t,n){"use strict";n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return j})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return c}));var r=n("./node_modules/pouchdb-utils/lib/index-browser.es.js"),i=n("./node_modules/pouchdb-collate/lib/index.es.js");function o(e,t){for(var n=e,r=0,i=t.length;r<i;r++){if(!(n=n[t[r]]))break}return n}function s(e,t,n){for(var r=0,i=t.length;r<i-1;r++){var o=t[r];e=e[o]=e[o]||{}}e[t[i-1]]=n}function u(e,t){return e<t?-1:e>t?1:0}function c(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];"."===o?r>0&&"\\"===e[r-1]?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=o}return t.push(n),t}var a=["$or","$nor","$not"];function d(e){return a.indexOf(e)>-1}function l(e){return Object.keys(e)[0]}function f(e){return e[l(e)]}function h(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(n){var r=e[n];if("object"!=typeof r&&(r={$eq:r}),d(n))t[n]=r instanceof Array?r.map((function(e){return h([e])})):h([r]);else{var i=t[n]=t[n]||{};Object.keys(r).forEach((function(e){var t=r[e];return"$gt"===e||"$gte"===e?function(e,t,n){if(void 0!==n.$eq)return;void 0!==n.$gte?"$gte"===e?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):void 0!==n.$gt?"$gte"===e?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t}(e,t,i):"$lt"===e||"$lte"===e?function(e,t,n){if(void 0!==n.$eq)return;void 0!==n.$lte?"$lte"===e?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):void 0!==n.$lt?"$lte"===e?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t}(e,t,i):"$ne"===e?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(t,i):"$eq"===e?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(t,i):void(i[e]=t)}))}}))})),t}function v(e){var t=Object(r.e)(e),n=!1;(function e(t,n){for(var r in t){"$and"===r&&(n=!0);var i=t[r];"object"==typeof i&&(n=e(i,n))}return n})(t,!1)&&("$and"in(t=function e(t){for(var n in t){if(Array.isArray(t))for(var r in t)t[r].$and&&(t[r]=h(t[r].$and));var i=t[n];"object"==typeof i&&e(i)}return t}(t))&&(t=h(t.$and)),n=!0),["$or","$nor"].forEach((function(e){e in t&&t[e].forEach((function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],i=e[r];"object"==typeof i&&null!==i||(e[r]={$eq:i})}}))})),"$not"in t&&(t.$not=h([t.$not]));for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o],u=t[s];"object"!=typeof u||null===u?u={$eq:u}:"$ne"in u&&!n&&(u.$ne=[u.$ne]),t[s]=u}return t}function p(e,t,n){if(e=e.filter((function(e){return y(e.doc,t.selector,n)})),t.sort){var r=function(e){function t(t){return e.map((function(e){var n=c(l(e));return o(t,n)}))}return function(e,n){var r=t(e.doc),o=t(n.doc),s=Object(i.a)(r,o);return 0!==s?s:u(e.doc._id,n.doc._id)}}(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===f(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var s=t.skip||0;e=e.slice(s,("limit"in t?t.limit:e.length)+s)}return e}function y(e,t,n){return n.every((function(n){var r=t[n],i=c(n),s=o(e,i);return d(n)?function(e,t,n){if("$or"===e)return t.some((function(e){return y(n,e,Object.keys(e))}));if("$not"===e)return!y(n,t,Object.keys(t));return!t.find((function(e){return y(n,e,Object.keys(e))}))}(n,r,e):m(r,e,i,s)}))}function m(e,t,n,r){return!e||("object"==typeof e?Object.keys(e).every((function(i){return function(e,t,n,r,i){if(!w[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return w[e](t,n,r,i)}(i,t,e[i],n,r)})):e===r)}function _(e){return null!=e}function b(e){return void 0!==e}function g(e,t){return t.some((function(t){return e instanceof Array?e.indexOf(t)>-1:e===t}))}var w={$elemMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&r.some("object"==typeof r[0]?function(e){return y(e,t,Object.keys(t))}:function(r){return m(t,e,n,r)}))},$allMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&r.every("object"==typeof r[0]?function(e){return y(e,t,Object.keys(t))}:function(r){return m(t,e,n,r)}))},$eq:function(e,t,n,r){return b(r)&&0===Object(i.a)(r,t)},$gte:function(e,t,n,r){return b(r)&&Object(i.a)(r,t)>=0},$gt:function(e,t,n,r){return b(r)&&Object(i.a)(r,t)>0},$lte:function(e,t,n,r){return b(r)&&Object(i.a)(r,t)<=0},$lt:function(e,t,n,r){return b(r)&&Object(i.a)(r,t)<0},$exists:function(e,t,n,r){return t?b(r):!b(r)},$mod:function(e,t,n,r){return _(r)&&function(e,t){var n=t[0],r=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===r}(r,t)},$ne:function(e,t,n,r){return t.every((function(e){return 0!==Object(i.a)(r,e)}))},$in:function(e,t,n,r){return _(r)&&g(r,t)},$nin:function(e,t,n,r){return _(r)&&!g(r,t)},$size:function(e,t,n,r){return _(r)&&function(e,t){return e.length===t}(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&function(e,t){return t.every((function(t){return e.indexOf(t)>-1}))}(r,t)},$regex:function(e,t,n,r){return _(r)&&function(e,t){return new RegExp(t).test(e)}(r,t)},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(r,t)}};function j(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var n=p([{doc:e}],{selector:t=v(t)},Object.keys(t));return n&&1===n.length}},"./node_modules/pouchdb-utils/lib/index-browser.es.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return q})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return B})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return $})),n.d(t,"i",(function(){return C})),n.d(t,"j",(function(){return U})),n.d(t,"k",(function(){return R})),n.d(t,"l",(function(){return F})),n.d(t,"m",(function(){return a.a})),n.d(t,"n",(function(){return z})),n.d(t,"o",(function(){return x})),n.d(t,"p",(function(){return L})),n.d(t,"q",(function(){return S})),n.d(t,"r",(function(){return J})),n.d(t,"s",(function(){return V})),n.d(t,"t",(function(){return A})),n.d(t,"u",(function(){return W})),n.d(t,"v",(function(){return K}));var r=n("./node_modules/argsarray/index.js"),i=n.n(r),o=n("./node_modules/pouchdb-collections/lib/index.es.js"),s=n("./node_modules/inherits/inherits_browser.js"),u=n.n(s),c=n("./node_modules/pouchdb-utils/node_modules/immediate/lib/index.js"),a=n.n(c),d=n("./node_modules/pouchdb-errors/lib/index.es.js"),l=n("./node_modules/events/events.js"),f=n.n(l),h="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),v=new Uint8Array(16);function p(){if(!h)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return h(v)}for(var y=[],m=0;m<256;++m)y.push((m+256).toString(16).substr(1));var _=function(e,t){var n=t||0;return(y[e[n+0]]+y[e[n+1]]+y[e[n+2]]+y[e[n+3]]+"-"+y[e[n+4]]+y[e[n+5]]+"-"+y[e[n+6]]+y[e[n+7]]+"-"+y[e[n+8]]+y[e[n+9]]+"-"+y[e[n+10]]+y[e[n+11]]+y[e[n+12]]+y[e[n+13]]+y[e[n+14]]+y[e[n+15]]).toLowerCase()};var b=function(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||p)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){for(var i=n||0,o=0;o<16;++o)t[i+o]=r[o];return t}return _(r)},g=n("./node_modules/pouchdb-md5/lib/index-browser.es.js");function w(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}var j=Function.prototype.toString,k=j.call(Object);function O(e){var t,n,r;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=O(e[n]);return t}if(e instanceof Date)return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return w(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&j.call(n)==k}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=O(e[n]);void 0!==i&&(t[n]=i)}return t}function x(e){var t=!1;return i()((function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)}))}function A(e){return i()((function(t){t=O(t);var n=this,r="function"==typeof t[t.length-1]&&t.pop(),i=new Promise((function(r,i){var o;try{var s=x((function(e,t){e?i(e):r(t)}));t.push(s),(o=e.apply(n,t))&&"function"==typeof o.then&&r(o)}catch(e){i(e)}}));return r&&i.then((function(e){r(null,e)}),r),i}))}function E(e,t){return A(i()((function(n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return function(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],i=0;i<n.length-1;i++)r.push(n[i]);e.constructor.emit("debug",r);var o=n[n.length-1];n[n.length-1]=function(n,r){var i=["api",e.name,t];i=i.concat(n?["error",n]:["success",r]),e.constructor.emit("debug",i),o(n,r)}}}(r,e,n),this.taskqueue.isReady?t.apply(this,n):new Promise((function(t,i){r.taskqueue.addTask((function(o){o?i(o):t(r[e].apply(r,n))}))}))})))}function S(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}var I;function D(e){return e}function P(e){return[{ok:e}]}function M(e,t,n){var r=t.docs,i=new o.a;r.forEach((function(e){i.has(e.id)?i.get(e.id).push(e):i.set(e.id,[e])}));var s=i.size,u=0,c=new Array(s);function a(){var e;++u===s&&(e=[],c.forEach((function(t){t.docs.forEach((function(n){e.push({id:t.id,docs:[n]})}))})),n(null,{results:e}))}var d=[];i.forEach((function(e,t){d.push(t)}));var l=0;function f(){if(!(l>=d.length)){var n=Math.min(l+6,d.length),r=d.slice(l,n);!function(n,r){n.forEach((function(n,o){var s=r+o,u=i.get(n),d=S(u[0],["atts_since","attachments"]);d.open_revs=u.map((function(e){return e.rev})),d.open_revs=d.open_revs.filter(D);var l=D;0===d.open_revs.length&&(delete d.open_revs,l=P),["revs","attachments","binary","ajax","latest"].forEach((function(e){e in t&&(d[e]=t[e])})),e.get(n,d,(function(e,t){var r;r=e?[{error:e}]:l(t),c[s]={id:n,docs:r},a(),f()}))}))}(r,l),l+=r.length}}f()}try{localStorage.setItem("_pouch_check_localstorage",1),I=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){I=!1}function C(){return I}function q(){f.a.call(this),this._listeners={},function(e){C()&&addEventListener("storage",(function(t){e.emit(t.key)}))}(this)}function $(e){if("undefined"!=typeof console&&"function"==typeof console[e])Array.prototype.slice.call(arguments,1)}u()(q,f.a),q.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var i=this,o=!1;this._listeners[t]=s,this.on(e,s)}function s(){if(i._listeners[t])if(o)o="waiting";else{o=!0;var e=S(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(e).on("change",(function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))})).on("complete",(function(){"waiting"===o&&a()(s),o=!1})).on("error",(function(){o=!1}))}}},q.prototype.removeListener=function(e,t){t in this._listeners&&(f.a.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},q.prototype.notifyLocalWindows=function(e){C()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},q.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var T="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};function B(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){r.doc||(r.doc={});var i=n&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return Object(d.p)(d.b,r)}}(e.filter,r.doc,t);if("object"==typeof i)return i;if(i)return!1;if(e.include_docs){if(!e.attachments)for(var o in r.doc._attachments)r.doc._attachments.hasOwnProperty(o)&&(r.doc._attachments[o].stub=!0)}else delete r.doc;return!0}}function N(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function U(e){var t;if(e?"string"!=typeof e?t=Object(d.p)(d.e):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=Object(d.p)(d.m)):t=Object(d.p)(d.i),t)throw t}function R(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&($("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function F(e,t){return"listenerCount"in e?e.listenerCount(t):f.a.listenerCount(e,t)}function L(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function z(e){var t=L(e);return t?t.join("/"):null}function V(e,t){var n=[],r=[];for(var i in t)t.hasOwnProperty(i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function W(e,t,n){return new Promise((function(r,i){e.get(t,(function(o,s){if(o){if(404!==o.status)return i(o);s={}}var u=s._rev,c=n(s);if(!c)return r({updated:!1,rev:u});c._id=t,c._rev=u,r(function(e,t,n){return e.put(t).then((function(e){return{updated:!0,rev:e.rev}}),(function(r){if(409!==r.status)throw r;return W(e,t._id,n)}))}(e,c,n))}))}))}function J(e,t){var n=O(e);return t?(delete n._rev_tree,Object(g.b)(JSON.stringify(n))):b().replace(/-/g,"").toLowerCase()}var K=b},"./node_modules/pouchdb-utils/node_modules/immediate/lib/index.js":function(e,t,n){"use strict";var r,i,o,s=[n(2),n("./node_modules/pouchdb-utils/node_modules/immediate/lib/queueMicrotask.js"),n("./node_modules/pouchdb-utils/node_modules/immediate/lib/mutation.js"),n("./node_modules/pouchdb-utils/node_modules/immediate/lib/messageChannel.js"),n("./node_modules/pouchdb-utils/node_modules/immediate/lib/stateChange.js"),n("./node_modules/pouchdb-utils/node_modules/immediate/lib/timeout.js")],u=-1,c=[],a=!1;function d(){r&&i&&(r=!1,i.length?c=i.concat(c):u=-1,c.length&&l())}function l(){if(!r){a=!1,r=!0;for(var e=c.length,t=setTimeout(d);e;){for(i=c,c=[];i&&++u<e;)i[u].run();u=-1,e=c.length}i=null,u=-1,r=!1,clearTimeout(t)}}for(var f=-1,h=s.length;++f<h;)if(s[f]&&s[f].test&&s[f].test()){o=s[f].install(l);break}function v(e,t){this.fun=e,this.array=t}v.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},e.exports=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new v(e,t)),a||r||(a=!0,o())}},"./node_modules/pouchdb-utils/node_modules/immediate/lib/messageChannel.js":function(e,t,n){"use strict";(function(e){t.test=function(){return!e.setImmediate&&void 0!==e.MessageChannel},t.install=function(t){var n=new e.MessageChannel;return n.port1.onmessage=t,function(){n.port2.postMessage(0)}}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/pouchdb-utils/node_modules/immediate/lib/mutation.js":function(e,t,n){"use strict";(function(e){var n=e.MutationObserver||e.WebKitMutationObserver;t.test=function(){return n},t.install=function(t){var r=0,i=new n(t),o=e.document.createTextNode("");return i.observe(o,{characterData:!0}),function(){o.data=r=++r%2}}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/pouchdb-utils/node_modules/immediate/lib/queueMicrotask.js":function(e,t,n){"use strict";(function(e){t.test=function(){return"function"==typeof e.queueMicrotask},t.install=function(t){return function(){e.queueMicrotask(t)}}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/pouchdb-utils/node_modules/immediate/lib/stateChange.js":function(e,t,n){"use strict";(function(e){t.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},t.install=function(t){return function(){var n=e.document.createElement("script");return n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n),t}}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/pouchdb-utils/node_modules/immediate/lib/timeout.js":function(e,t,n){"use strict";t.test=function(){return!0},t.install=function(e){return function(){setTimeout(e,0)}}},"./node_modules/pouchdb-wrappers/lib/index.js":function(e,t,n){"use strict";var r=n("./node_modules/promise-nodify/index.js");function i(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){var i=o(e,r),s=i.base[i.name];if(s)if(s.hasOwnProperty("_handlers")){if(-1!==s._handlers.indexOf(t[r]))throw new Error("Wrapper method for '"+r+"' already installed: "+t[r]);s._handlers.push(t[r])}else i.base[i.name]=n(r,s,t[r],e)}}function o(e,t){for(t=t.split(".");t.length>1;)e=e[t.shift(0)];return{base:e,name:t[0]}}function s(e,t,n,r,i){var o=r[e];if(void 0===o)throw new Error("No known wrapper for method name: "+e);var s=[n],u=o(i,t,s);return u._original=t,u._handlers=s,u}t.installStaticWrapperMethods=function(e,n){e.new=e.new||function(t,n,r){return new e(t,n,r)},e.destroy=e.destroy||function(t,n,i){var o=a(e,this,n,i),s=new e(t,o.options).destroy();return r(s,o.callback),s},i(e,n,t.createStaticWrapperMethod)},t.installWrapperMethods=function(e,n){i(e,n,t.createWrapperMethod)},t.createStaticWrapperMethod=function(e,t,n,r){return s(e,t,n,c,r)},t.createWrapperMethod=function(e,t,n,r){return s(e,t,n,u,r)};var u={destroy:function(e,t,n){return function(r,i){var o=a(e,this,r,i);return d(n,o,l(t))}},put:function(e,t,n){return function(){var r={};r.base=e||this;var i=Array.prototype.slice.call(arguments);r.doc=i.shift();var o="_id"in r.doc;do{var s=i.shift(),u=typeof s;"string"!==u||o?"string"===u&&o&&!("_rev"in r.doc)?r.doc._rev=s:"object"===u?r.options=s:"function"===u&&(r.callback=s):(r.doc._id=s,o=!0)}while(i.length);return r.options=r.options||{},d(n,r,(function(){return t.call(this,r.doc,r.options)}))}},post:function(e,t,n){return function(r,i,o){var s=a(e,this,i,o);return s.doc=r,d(n,s,(function(){return t.call(this,s.doc,s.options)}))}},get:function(e,t,n){return function(r,i,o){var s=a(e,this,i,o);return s.docId=r,d(n,s,(function(){return t.call(this,s.docId,s.options)}))}},remove:function(e,t,n){return function(r,i,o,s){var u;return"string"==typeof i?(u=a(e,this,o,s)).doc={_id:r,_rev:i}:(u=a(e,this,i,o)).doc=r,d(n,u,(function(){return t.call(this,u.doc,u.options)}))}},bulkDocs:function(e,t,n){return function(r,i,o){var s=a(e,this,i,o);return"object"==typeof r&&"new_edits"in r&&(s.options.new_edits=r.new_edits),s.docs=r.docs||r,d(n,s,(function(){return t.call(this,s.docs,s.options)}))}},allDocs:function(e,t,n){return function(r,i){var o=a(e,this,r,i);return d(n,o,f(t,o))}}};u.bulkGet=u.allDocs,u.changes=function(e,t,n){return function(r,i){var o=a(e,this,r,i);return d(n,o,f(t,o))}},u.sync=function(e,t,n){return function(r,i,o){var s=a(e,this,i,o);return s.url=r,d(n,s,(function(){return t.call(this,s.url,s.options)}))}},u["replicate.from"]=u.sync,u["replicate.to"]=u.sync,u.putAttachment=function(e,t,n){return function(r,i,o,s,u,c,l){var f;return"string"==typeof u?((f=a(e,this,c,l)).rev=o,f.doc=s,f.type=u):((f=a(e,this,u,c)).rev=null,f.doc=o,f.type=s),f.docId=r,f.attachmentId=i,d(n,f,(function(){return t.call(this,f.docId,f.attachmentId,f.rev,f.doc,f.type)}))}},u.getAttachment=function(e,t,n){return function(r,i,o,s){var u=a(e,this,o,s);return u.docId=r,u.attachmentId=i,d(n,u,(function(){return t.call(this,u.docId,u.attachmentId,u.options)}))}},u.removeAttachment=function(e,t,n){return function(r,i,o,s,u){var c=a(e,this,s,u);return c.docId=r,c.attachmentId=i,c.rev=o,d(n,c,(function(){return t.call(this,c.docId,c.attachmentId,c.rev)}))}},u.query=function(e,t,n){return function(r,i,o){var s=a(e,this,i,o);return s.fun=r,d(n,s,(function(){return t.call(this,s.fun,s.options)}))}},u.viewCleanup=function(e,t,n){return function(r,i){var o=a(e,this,r,i);return d(n,o,f(t,o))}},u.createIndex=function(e,t,n){return function(r,i,o){var s=a(e,this,i,o);return s.index=r,d(n,s,(function(){return t.call(this,s.index)}))}},u.deleteIndex=u.createIndex,u.find=function(e,t,n){return function(r,i,o){var s=a(e,this,i,o);return s.request=r,d(n,s,(function(){return t.call(this,s.request)}))}},u.explain=u.find,u.info=function(e,t,n){return function(r,i){var o=a(e,this,r,i);return d(n,o,l(t))}},u.getIndexes=u.info,u.compact=function(e,t,n){return function(r,i){var o=a(e,this,r,i);return d(n,o,f(t,o))}},u.revsDiff=function(e,t,n){return function(r,i,o){var s=a(e,this,i,o);return s.diff=r,d(n,s,(function(){return t.call(this,s.diff)}))}},u.list=function(e,t,n){return function(r,i,o){var s=a(e,this,i,o);return s.path=r,d(n,s,(function(){return t.call(this,s.path,s.options)}))}},u.rewriteResultRequestObject=u.list,u.show=u.list,u.update=u.list,u.getSecurity=function(e,t,n){return function(r,i){var o=a(e,this,r,i);return d(n,o,f(t,o))}},u.putSecurity=function(e,t,n){return function(r,i,o){var s=a(e,this,i,o);return s.secObj=r,d(n,s,(function(){return t.call(this,s.secObj)}))}};var c={};function a(e,t,n,r){return"function"==typeof n&&(r=n,n={}),{base:e||t,options:n||{},callback:r}}function d(e,t,n){var i=t.callback;delete t.callback,n=n.bind(t.base);for(var o=e.length-1;o>=0;o-=1)n=e[o].bind(null,n,t);var s=n();return r(s,i),s}function l(e){return function(){return e.call(this)}}function f(e,t){return function(){return e.call(this,t.options)}}function h(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=o(e,n),i=r.base[r.name];if(void 0!==i){var s;try{s=i._handlers.indexOf(t[n])}catch(e){s=-1}if(-1===s)throw new Error("Wrapper method for '"+n+"' not installed: "+t[n]);i._handlers.splice(s,1),i._handlers.length||(delete r.base[r.name],r.base[r.name]!==i._original&&(r.base[r.name]=i._original))}}}c.new=function(e,t,n){return function(r,i,o){var s;return"object"==typeof r?s=a(e,this,r,i):(s=a(e,this,i,o)).options.name=r,d(n,s,(function(){return t.call(this,s.options)}))}},c.destroy=function(e,t,n){return function(r,i,o){var s;return"object"==typeof r?s=a(e,this,r,i):(s=a(e,this,i,o)).options.name=r,s.options.internal?t.apply(e,arguments):d(n,s,(function(){var e=s.options.name;return delete s.options.name,t.call(this,e,s.options)}))}},c.replicate=function(e,t,n){return function(r,i,o,s){var u=a(e,this,o,s);return u.source=r,u.target=i,d(n,u,(function(){return t.call(this,u.source,u.target,u.options)}))}},c.allDbs=function(e,t,n){return function(r,i){var o=a(e,this,r,i);return d(n,o,l(t))}},t.uninstallWrapperMethods=function(e,t){h(e,t)},t.uninstallStaticWrapperMethods=function(e,t){h(e,t)}},"./node_modules/promise-nodify/index.js":function(e,t,n){"use strict";e.exports=function(e,t){"function"==typeof t&&e.then((function(e){t(null,e)}),(function(e){t(e,null)}))}},"./node_modules/randombytes/browser.js":function(e,t,n){"use strict";(function(t,r){var i=n("./node_modules/safe-buffer/index.js").Buffer,o=t.crypto||t.msCrypto;e.exports=o&&o.getRandomValues?function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(e);if(e>0)if(e>65536)for(var s=0;s<e;s+=65536)o.getRandomValues(n.slice(s,s+65536));else o.getRandomValues(n);if("function"==typeof t)return r.nextTick((function(){t(null,n)}));return n}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/react-native-uuid/uuid.js":function(e,t,n){(function(r){var i;!function(o){"use strict";var s,u,c,a;o?function(){var e=o.crypto||o.msCrypto;if(!s&&e&&e.getRandomValues)try{var t=new Uint8Array(16);a=s=function(){return e.getRandomValues(t),t},s()}catch(e){}if(!s){var n=new Array(16);u=s=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n},"undefined"!=typeof console&&console}}():function(){try{var e=n("./node_modules/randombytes/browser.js");c=s=e&&function(){return e(16)},s()}catch(e){}}();for(var d="function"==typeof r?r:Array,l=[],f={},h=0;h<256;h++)l[h]=(h+256).toString(16).substr(1),f[l[h]]=h;function v(e,t){var n=t||0;return l[e[n++]]+l[e[n++]]+l[e[n++]]+l[e[n++]]+"-"+l[e[n++]]+l[e[n++]]+"-"+l[e[n++]]+l[e[n++]]+"-"+l[e[n++]]+l[e[n++]]+"-"+l[e[n++]]+l[e[n++]]+l[e[n++]]+l[e[n++]]+l[e[n++]]+l[e[n++]]}var p=s(),y=[1|p[0],p[1],p[2],p[3],p[4],p[5]],m=16383&(p[6]<<8|p[7]),_=0,b=0;function g(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new d(16):null,e=null);var i=(e=e||{}).random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;o++)t[r+o]=i[o];return t||v(i)}var w=g;w.v1=function(e,t,n){var r=t&&n||0,i=t||[],o=null!=(e=e||{}).clockseq?e.clockseq:m,s=null!=e.msecs?e.msecs:(new Date).getTime(),u=null!=e.nsecs?e.nsecs:b+1,c=s-_+(u-b)/1e4;if(c<0&&null==e.clockseq&&(o=o+1&16383),(c<0||s>_)&&null==e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_=s,b=u,m=o;var a=(1e4*(268435455&(s+=122192928e5))+u)%4294967296;i[r++]=a>>>24&255,i[r++]=a>>>16&255,i[r++]=a>>>8&255,i[r++]=255&a;var d=s/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=255&d,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var l=e.node||y,f=0;f<6;f++)i[r+f]=l[f];return t||v(i)},w.v4=g,w.parse=function(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,(function(e){i<16&&(t[r+i++]=f[e])}));i<16;)t[r+i++]=0;return t},w.unparse=v,w.BufferClass=d,w._rng=s,w._mathRNG=u,w._nodeRNG=c,w._whatwgRNG=a,e.exports?e.exports=w:void 0===(i=function(){return w}.call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof window?window:null)}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/safe-buffer/index.js":function(e,t,n){var r=n("./node_modules/buffer/index.js"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},"./node_modules/spark-md5/spark-md5.js":function(e,t,n){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var t,i,o,s,u,c,a=e.length,d=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)n(d,r(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(d,o),t=0;t<16;t+=1)o[t]=0;return s=(s=8*a).toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(s[2],16),c=parseInt(s[1],16)||0,o[14]=u,o[15]=c,n(d,o),d}function s(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function u(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function a(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function d(){this.reset()}return u(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,o,s,u,c=this.byteLength,a=t(n,c),d=c;return r!==e&&(d=t(r,c)),a>d?new ArrayBuffer(0):(i=d-a,o=new ArrayBuffer(i),s=new Uint8Array(o),u=new Uint8Array(this,a,i),s.set(u),o)}}(),d.prototype.append=function(e){return this.appendBinary(c(e)),this},d.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},d.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=u(this._hash),e&&(n=a(n)),this.reset(),n},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},d.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(e,t){var r,i,o,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,e),s=0;s<16;s+=1)e[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=i,e[15]=o,n(this._hash,e)},d.hash=function(e,t){return d.hashBinary(c(e),t)},d.hashBinary=function(e,t){var n=u(o(e));return t?a(n):n},(d.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,r,o,s,u,c=(r=this._buff.buffer,o=e,s=!0,(u=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r)),u.set(new Uint8Array(o),r.byteLength),s?u:u.buffer),a=c.length;for(this._length+=e.byteLength,t=64;t<=a;t+=64)n(this._hash,i(c.subarray(t-64,t)));return this._buff=t-64<a?new Uint8Array(c.buffer.slice(t-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=u(this._hash),e&&(n=a(n)),this.reset(),n},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var e=d.prototype.getState.call(this);return e.buff=String.fromCharCode.apply(null,new Uint8Array(e.buff)),e},d.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:i}(e.buff,!0),d.prototype.setState.call(this,e)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(e,t){var r=u(function(e){var t,r,o,s,u,c,a=e.length,d=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)n(d,i(e.subarray(t-64,t)));for(e=t-64<a?e.subarray(t-64):new Uint8Array(0),r=e.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(d,o),t=0;t<16;t+=1)o[t]=0;return s=(s=8*a).toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(s[2],16),c=parseInt(s[1],16)||0,o[14]=u,o[15]=c,n(d,o),d}(new Uint8Array(e)));return t?a(r):r},d}()},"./node_modules/transform-pouch/index.js":function(e,t,n){"use strict";(function(e){var r=n("./node_modules/lie/lib/index.js"),i=n("./node_modules/transform-pouch/pouch-utils.js"),o=n("./node_modules/pouchdb-wrappers/lib/index.js"),s=n("./node_modules/immediate/lib/browser.js");function u(e){return"_"!==e[0]}function c(e){return!("string"!=typeof e._id||!i.isLocalId(e._id))||!!e._deleted&&0===Object.keys(e).filter(u).length}t.transform=t.filter=function(t){var n=function(e){return!c(e)&&t.outgoing?t.outgoing(i.clone(e)):e},u={};"http"===this.type()&&(u.query=function(e){var t={};return e().then((function(e){return i.Promise.all(e.rows.map((function(e){return e.doc?n(e.doc):t}))).then((function(n){return n.forEach((function(n,r){n!==t&&(e.rows[r].doc=n)})),e}))}))}),u.get=function(e){return e().then((function(e){if(Array.isArray(e)){var t={};return i.Promise.all(e.map((function(e){return e.ok?n(e.ok):t}))).then((function(n){return n.forEach((function(n,r){n!==t&&(e[r].ok=n)})),e}))}return n(e)}))},u.bulkDocs=function(e,n){for(var o=0;o<n.docs.length;o++)n.docs[o]=!c(s=n.docs[o])&&t.incoming?t.incoming(i.clone(s)):s;var s;return r.all(n.docs).then((function(t){return n.docs=t,e()}))},u.allDocs=function(e){return e().then((function(e){var t={};return i.Promise.all(e.rows.map((function(e){return e.doc?n(e.doc):t}))).then((function(n){return n.forEach((function(n,r){n!==t&&(e.rows[r].doc=n)})),e}))}))},u.bulkGet=function(e){return e().then((function(e){var t={};return i.Promise.all(e.results.map((function(e){return e.id&&e.docs&&Array.isArray(e.docs)?{docs:e.docs.map((function(e){return e.ok?{ok:n(e.ok)}:e})),id:e.id}:t}))).then((function(e){return{results:e}}))}))},u.changes=function(t){function r(e){return e.doc?i.Promise.resolve(n(e.doc)).then((function(t){return e.doc=t,e})):i.Promise.resolve(e)}function o(e){return e.results?i.Promise.all(e.results.map(r)).then((function(t){return e.results=t,e})):i.Promise.resolve(e)}var u=t(),c=u.on;u.on=function(t,n){return c.apply(u,"change"===t?[t,function(e){r(e).then((function(e){s((function(){n(e)}))}))}]:"complete"===t?[t,function(t){o(t).then((function(t){e.nextTick((function(){n(t)}))}))}]:[t,n])};var a=u.then;return u.then=function(e,t){return a.apply(u,[function(n){return o(n).then(e,t)},t])},u},o.installWrapperMethods(this,u)},"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(t)}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/transform-pouch/node_modules/inherits/inherits_browser.js":function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},"./node_modules/transform-pouch/pouch-utils.js":function(e,t,n){"use strict";(function(e){var r=n("./node_modules/pouchdb-promise/lib/index.js");t.once=function(e){var n=!1;return t.getArguments((function(t){if(n)throw new Error("once called  more than once");n=!0,e.apply(this,t)}))},t.getArguments=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}},t.toPromise=function(n){return t.getArguments((function(i){var o,s=this,u="function"==typeof i[i.length-1]&&i.pop();u&&(o=function(t,n){e.nextTick((function(){u(t,n)}))});var c=new r((function(e,r){try{var o=t.once((function(t,n){t?r(t):e(n)}));i.push(o),n.apply(s,i)}catch(e){r(e)}}));return o&&c.then((function(e){o(null,e)}),o),c.cancel=function(){return this},c}))},t.inherits=n("./node_modules/transform-pouch/node_modules/inherits/inherits_browser.js"),t.Promise=r,t.extend=n("./node_modules/pouchdb-extend/index.js"),t.clone=function(e){return t.extend(!0,{},e)},t.isLocalId=function(e){return/^_local/.test(e)}}).call(this,n("./node_modules/process/browser.js"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2ZW5kb3JzfkRhdGFMYWtlLnByb2QuMzIwOGY0MTguY2h1bmsuanMiLCJzb3VyY2VSb290IjoiIn0=